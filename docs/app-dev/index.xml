<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>– App Development</title><link>https://onshape-public.github.io/docs/app-dev/</link><description>Recent content in App Development on</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Mon, 18 May 2020 20:44:05 -0400</lastBuildDate><atom:link href="https://onshape-public.github.io/docs/app-dev/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: Extensions</title><link>https://onshape-public.github.io/docs/app-dev/extensions/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://onshape-public.github.io/docs/app-dev/extensions/</guid><description>
&lt;p>This page provides information for some of the more common options for
embedding a third-party application into the Onshape interface. Onshape provides many options for embedding commands in various menus, fly-out panels, and elements. In this example, you will embed a custom web page inside a document’s right side fly-out panel. This interface will receive information from Onshape and push information from the panel back to Onshape, providing a complete, bi-directional integration scenario.&lt;/p>
&lt;p>Please see also:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://onshape-public.github.io/docs/tutorials/createextension/">Create an Extension tutorial&lt;/a>: A step-by-step walkthrough of creating an extension.&lt;/li>
&lt;li>Create an Extension Video Sample:
&lt;a href="https://onshape.wistia.com/medias/0ivxxngkjz?embedType=async&amp;seo=false&amp;videoFoam=true&amp;videoWidth=640&amp;wvideo=0ivxxngkjz)">&lt;img src="https://onshape-public.github.io/images/ExtensionsVideoCard.png" style="width:5in" alt="OAuth app creation video"/>&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="extension-types">Extension Types&lt;/h2>
&lt;p>We can classify extensions into two high-level types. The first type embeds a UI &lt;em>from&lt;/em> the application &lt;em>into&lt;/em> the Onshape UI. The embedded UI is an HTTPS page displayed in an iFrame in the Onshape UI. The UI is served from the application, and can choose to make API calls to Onshape for additional information. This is exactly like the traditional tab-based applications in Onshape, except that such extensions exist at different UI locations.&lt;/p>
&lt;p>The second type of extension embeds an action that calls a REST API &lt;em>exposed by&lt;/em> the application &lt;em>from&lt;/em> the Onshape UI (e.g., context menu actions and toolbar actions). These types of extensions rely on External OAuth information to authenticate and make a call where Onshape acts as a client, and the application acts as a server.&lt;/p>
&lt;h2 id="extension-attributes">Extension Attributes&lt;/h2>
&lt;p>Each extension exists at a specific place in the Onshape UI and works with a specific context or selection. The attributes of an extension are:&lt;/p>
&lt;ol>
&lt;li>&lt;strong>Name&lt;/strong>: This should be short and explicit. It will appear in the Onshape UI as a menu item, a toolbar tooltip, a collapsed panel icon tooltip, or a panel icon. It might be truncated in the UI if it is too long.&lt;/li>
&lt;li>&lt;strong>Description&lt;/strong>: This is where the developer can record a detailed description of the extension. It does not appear in the Onshape UI, but could appear in the grant process.&lt;/li>
&lt;li>&lt;strong>Location&lt;/strong>: This describes where the extension exists in the Onshape UI. Over time, this will cover various panels in the UI, context menus, toolbars, actions in dialogs, etc. You can see the list of currently supported locations &lt;a href="#supported-locations-and-contexts">here&lt;/a>.
&lt;ul>
&lt;li>Please note that you can create only one element tab extension per application.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Context&lt;/strong> (selection): Some locations will work in the context of a selection. Let’s say the application developer wants to show some information from a third-party system, pertinent only to parts (not assemblies or drawings). In this scenario, the developer would choose a location like ‘Document list info panel’, and the context as ‘Selected part’. If the user searches for something in the document list, some documents, Part Studios, parts, and Assemblies would be returned. This extension will show up in the Info panel only if the selected entity is a part. Using context enables application developers to control when the extension is displayed. Check the list of contexts available for different locations &lt;a href="#supported-locations-and-contexts">here&lt;/a>.&lt;/li>
&lt;li>&lt;strong>Action URL&lt;/strong>: Locations that embed a UI use the action URL to define the address of the page to display. The action URL is used to specify the REST endpoint if the location is an action (context menu, toolbar item, action in dialog etc.) and the action type is GET or POST. If the location is an action and the action is ‘Open in new window’, the action URL is the URL to open in the new window.&lt;br>
The action URL can be parameterized to pass information from Onshape to the application. The action URL replaces attributes in the format {$attribute} with the appropriate value. These attributes can be used to identify the selected entity and/or make calls back to Onshape via the API. The currently supported attributes are:
&lt;ul>
&lt;li>&lt;code>{$documentId}&lt;/code> - The Onshape ID for the current or selected document.&lt;/li>
&lt;li>&lt;code>{$workspaceOrVersion}&lt;/code> - This will be either &lt;code>w&lt;/code> or &lt;code>v&lt;/code> for workspace or version respectively depending on current opened document state or selection.&lt;/li>
&lt;li>&lt;code>{$workspaceOrVersionId}&lt;/code> - The Onshape ID for the current or selected workspace or version.&lt;/li>
&lt;li>&lt;code>{$workspaceId}&lt;/code> - DEPRECATED&lt;/li>
&lt;li>&lt;code>{$versionId}&lt;/code> - DEPRECATED&lt;/li>
&lt;li>&lt;code>{$elementId}&lt;/code> - The Onshape ID for the current or selected element (part studio, assembly, drawing).&lt;/li>
&lt;li>&lt;code>{$partId}&lt;/code> - The Onshape ID for the current or selected part.&lt;/li>
&lt;li>&lt;code>{$partNumber}&lt;/code> - The Part number property for the current or selected part, assembly or drawing.&lt;/li>
&lt;li>&lt;code>{$revision}&lt;/code> - The Revision property for the current or selected part, assembly or drawing.&lt;/li>
&lt;li>&lt;code>{$mimeType}&lt;/code> - The mime type if the current or selected element is a blob.&lt;/li>
&lt;li>&lt;code>{$featureId}&lt;/code> - In case of feature selected in the Feature list in a Part Studio.&lt;/li>
&lt;li>&lt;code>{$nodeId}&lt;/code> - In case of mate or mate feature selected in the Assembly list.&lt;/li>
&lt;li>&lt;code>{$occurrencePath}&lt;/code> - In case of part instances, mates, mate connectors and sub assemblies.&lt;/li>
&lt;li>&lt;code>{$configuration}&lt;/code> - In case of extensions inside the document, this attribute will be replaced by current element active configuration.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>The attributes can exist as path parameters or query parameters or attributes in the POST body. For example:&lt;/p>
&lt;pre tabindex="0">&lt;code>[https://whispering-sea-42267.herokuapp.com/oauthSignin?documentId={$documentId}&amp;amp;workspaceOrVersion={workspaceOrVersion}&amp;amp;workspaceOrVersionId={$workspaceOrVersionId}&amp;amp;elementId={$elementId}&amp;amp;partId={$partId}&amp;amp;server=https://cad.onshape.com&amp;amp;companyId=cad&amp;amp;userId=5f1eba76c14a434817d9c588&amp;amp;locale=en-US](https://whispering-sea-42267.herokuapp.com/oauthSignin?documentId=%7B$documentId%7D&amp;amp;workspaceId=%7B$workspaceId%7D&amp;amp;elementId=%7B$elementId%7D&amp;amp;partId=%7B$partId)
&lt;/code>&lt;/pre>&lt;p>or&lt;/p>
&lt;pre tabindex="0">&lt;code>[https://cad.onshape.com/api/partstudios/d/{$documentId}/{$workspaceOrVersion}/{$workspaceOrVersionId}/e/{$elementId}/stl?server=https://cad.onshape.com&amp;amp;companyId=cad&amp;amp;userId=5f1eba76c14a434817d9c588&amp;amp;locale=en-US](https://cad.onshape.com/api/partstudios/d/%7B$documentId%7D/w/%7B$workspaceId%7D/e/%7B$elementId%7D/stl)
&lt;/code>&lt;/pre>&lt;p>The attributes available for replacement differ by location and context selection. You can see the available attributes for each location &lt;a href="#supported-locations-and-contexts">here&lt;/a>.&lt;/p>
&lt;p>The &lt;strong>timeout&lt;/strong> for &lt;code>action_url&lt;/code> of type &lt;code>GET&lt;/code> or &lt;code>POST&lt;/code> is &lt;strong>180 seconds&lt;/strong>.&lt;/p>
&lt;ol start="6">
&lt;li>
&lt;p>&lt;strong>Action type&lt;/strong>: The action type is only applicable for locations that act as actions and not for locations that embed UIs. Check if action type is valid for a location &lt;a href="#supported-locations-and-contexts">here&lt;/a>. The supported action types are:&lt;/p>
&lt;ul>
&lt;li>&lt;code>GET&lt;/code> - This makes a GET API call using the action URL. Parameter replacement is done on the action URL.&lt;/li>
&lt;li>&lt;code>POST&lt;/code> - This makes a POST API call using the action URL and the action body as the post body. Parameter replacement is done on both the action URL and the action body.&lt;/li>
&lt;li>&lt;code>Open in new window&lt;/code> - This opens the action URL in a new browser window. Parameter replacement is done on the action URL.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Action body&lt;/strong>: This is only applicable if the action type is POST. The action body is passed in a POST API call and must be in a valid json format.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Show response&lt;/strong>: This is only applicable if the action type is GET or POST. If this is checked, the UI will wait for a response and show the response in a dialog in the UI. The response must be in a valid json format.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Icon&lt;/strong>: The icon will be shown where the extension exists. This can be an icon in an Info panel, context menu action, toolbar button, action button in a dialog, or other supported locations.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="supported-locations-and-contexts">Supported Locations and Contexts&lt;/h2>
&lt;p>This is the list of supported locations, their valid contexts, and whether they support action types.&lt;/p>
&lt;h3 id="element-context-menu">Element context menu&lt;/h3>
&lt;p>This is the context menu for elements.&lt;/p>
&lt;p>&lt;img src="https://onshape-public.github.io/images/extensionsimage04.png" alt="image alt text">&lt;/p>
&lt;p>Supported contexts:&lt;/p>
&lt;ul>
&lt;li>&lt;code>Part Studio&lt;/code>&lt;/li>
&lt;li>&lt;code>Assembly&lt;/code>&lt;/li>
&lt;li>&lt;code>Drawing&lt;/code>&lt;/li>
&lt;li>&lt;code>Blob element&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>Supported parameters for replacements:&lt;/p>
&lt;ul>
&lt;li>&lt;code>{$documentId}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$workspaceOrVersion}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$workspaceOrVersionId}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$workspaceId}&lt;/code> DEPRECATED&lt;/li>
&lt;li>&lt;code>{$versionId}&lt;/code> DEPRECATED&lt;/li>
&lt;li>&lt;code>{$elementId}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$partNumber}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$mimeType}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$configuration}&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>Default parameters as query string:&lt;/p>
&lt;ul>
&lt;li>&lt;code>server&lt;/code>&lt;/li>
&lt;li>&lt;code>companyId&lt;/code> - Default value is ‘cad’. If the document owner is company/enterprise, then the value is company/enterprise ID.&lt;/li>
&lt;li>&lt;code>userId&lt;/code>&lt;/li>
&lt;li>&lt;code>locale&lt;/code>&lt;/li>
&lt;li>&lt;code>clientId&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>This location supports action types.&lt;/p>
&lt;h3 id="tree-context-menu">Tree context menu&lt;/h3>
&lt;p>This is the context menu for the part tree, assembly tree and feature tree in part studios.&lt;/p>
&lt;p>&lt;img src="https://onshape-public.github.io/images/extensionsimage05.png" alt="image alt text">&lt;/p>
&lt;p>Supported contexts:&lt;/p>
&lt;ul>
&lt;li>&lt;code>Part&lt;/code>&lt;/li>
&lt;li>&lt;code>Sub assembly&lt;/code>&lt;/li>
&lt;li>&lt;code>Feature&lt;/code>&lt;/li>
&lt;li>&lt;code>Mate&lt;/code>&lt;/li>
&lt;li>&lt;code>Mate feature&lt;/code>&lt;/li>
&lt;li>&lt;code>Instance&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>Supported parameters for replacement:&lt;/p>
&lt;ul>
&lt;li>&lt;code>{$documentId}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$workspaceOrVersion}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$workspaceOrVersionId}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$workspaceId}&lt;/code> DEPRECATED&lt;/li>
&lt;li>&lt;code>{$versionId}&lt;/code> DEPRECATED&lt;/li>
&lt;li>&lt;code>{$elementId}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$partNumber}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$revision}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$featureId}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$nodeId}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$occurrencePath}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$configuration}&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>Default parameters as query string:&lt;/p>
&lt;ul>
&lt;li>&lt;code>server&lt;/code>&lt;/li>
&lt;li>&lt;code>companyId&lt;/code> - Default value is ‘cad’. If the document owner is company/enterprise, then the value is company/enterprise ID.&lt;/li>
&lt;li>&lt;code>userId&lt;/code>&lt;/li>
&lt;li>&lt;code>locale&lt;/code>&lt;/li>
&lt;li>&lt;code>clientId&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>This location supports action types.&lt;/p>
&lt;h3 id="document-list-context-menu">Document list context menu&lt;/h3>
&lt;p>This the context menu available on items in the document list. This is normally documents but can be multiple types based on search results.&lt;/p>
&lt;p>&lt;img src="https://onshape-public.github.io/images/extensionsimage06.png" alt="image alt text">&lt;/p>
&lt;p>Supported contexts:&lt;/p>
&lt;ul>
&lt;li>&lt;code>Part&lt;/code>&lt;/li>
&lt;li>&lt;code>Document&lt;/code>&lt;/li>
&lt;li>&lt;code>Part Studio&lt;/code>&lt;/li>
&lt;li>&lt;code>Assembly&lt;/code>&lt;/li>
&lt;li>&lt;code>Drawing&lt;/code>&lt;/li>
&lt;li>&lt;code>Blob element&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>Supported parameters for replacement:&lt;/p>
&lt;ul>
&lt;li>&lt;code>{$documentId}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$workspaceOrVersion}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$workspaceOrVersionId}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$workspaceId}&lt;/code> DEPRECATED&lt;/li>
&lt;li>&lt;code>{$versionId}&lt;/code> DEPRECATED&lt;/li>
&lt;li>&lt;code>{$elementId}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$partNumber}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$revision}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$configuration}&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>Default parameters as query string:&lt;/p>
&lt;ul>
&lt;li>&lt;code>server&lt;/code>&lt;/li>
&lt;li>&lt;code>companyId&lt;/code> - Default value is ‘cad’. If the document owner is company/enterprise, then the value is company/enterprise ID.&lt;/li>
&lt;li>&lt;code>userId&lt;/code>&lt;/li>
&lt;li>&lt;code>locale&lt;/code>&lt;/li>
&lt;li>&lt;code>clientId&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>This location supports action types.&lt;/p>
&lt;h3 id="document-list-info-panel">Document list info panel&lt;/h3>
&lt;p>This is the Info panel to the right in the document list. The document list normally contains documents, but can contain other entities as the result of a search.&lt;/p>
&lt;p>&lt;img src="https://onshape-public.github.io/images/extensionsimage07.png" alt="image alt text">&lt;/p>
&lt;p>Supported contexts:&lt;/p>
&lt;ul>
&lt;li>&lt;code>Part&lt;/code>&lt;/li>
&lt;li>&lt;code>Document&lt;/code>&lt;/li>
&lt;li>&lt;code>Part Studio&lt;/code>&lt;/li>
&lt;li>&lt;code>Assembly&lt;/code>&lt;/li>
&lt;li>&lt;code>Drawing&lt;/code>&lt;/li>
&lt;li>&lt;code>Blob element&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>Supported parameters for replacement:&lt;/p>
&lt;ul>
&lt;li>&lt;code>{$documentId}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$workspaceOrVersion}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$workspaceOrVersionId}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$workspaceId}&lt;/code> DEPRECATED&lt;/li>
&lt;li>&lt;code>{$versionId}&lt;/code> DEPRECATED&lt;/li>
&lt;li>&lt;code>{$elementId}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$partId}&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>Default parameters as query string:&lt;/p>
&lt;ul>
&lt;li>&lt;code>server&lt;/code>&lt;/li>
&lt;li>&lt;code>companyId&lt;/code> - Default value is ‘cad’. If the document owner is company/enterprise, then the value is company/enterprise ID.&lt;/li>
&lt;li>&lt;code>userId&lt;/code>&lt;/li>
&lt;li>&lt;code>locale&lt;/code>&lt;/li>
&lt;li>&lt;code>clientId&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>This location does NOT support action types.&lt;/p>
&lt;h3 id="element-right-panel">Element right panel&lt;/h3>
&lt;p>This is the panel inside a document. It currently houses the BOM, configurations, etc. Applications can use this extension location to add items in this panel.&lt;/p>
&lt;p>&lt;img src="https://onshape-public.github.io/images/extensionsimage08.png" alt="image alt text">&lt;/p>
&lt;p>Supported contexts:&lt;/p>
&lt;ul>
&lt;li>&lt;code>Part&lt;/code>&lt;/li>
&lt;li>&lt;code>Document&lt;/code>&lt;/li>
&lt;li>&lt;code>Part Studio&lt;/code>&lt;/li>
&lt;li>&lt;code>Assembly&lt;/code>&lt;/li>
&lt;li>&lt;code>Sub assembly&lt;/code>&lt;/li>
&lt;li>&lt;code>Feature&lt;/code>&lt;/li>
&lt;li>&lt;code>Mate&lt;/code>&lt;/li>
&lt;li>&lt;code>Mate feature&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>Supported parameters for replacement:&lt;/p>
&lt;ul>
&lt;li>&lt;code>{$documentId}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$workspaceOrVersion}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$workspaceOrVersionId}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$workspaceId}&lt;/code> DEPRECATED&lt;/li>
&lt;li>&lt;code>{$versionId}&lt;/code> DEPRECATED&lt;/li>
&lt;li>&lt;code>{$elementId}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$partNumber}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$revision}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$featureId}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$nodeId}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$occurrencePath}&lt;/code>&lt;/li>
&lt;li>&lt;code>{$configuration}&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>Default parameters as query string:&lt;/p>
&lt;ul>
&lt;li>&lt;code>server&lt;/code>&lt;/li>
&lt;li>&lt;code>companyId&lt;/code> - Default value is ‘cad’. If the document owner is company/enterprise, then the value is company/enterprise ID.&lt;/li>
&lt;li>&lt;code>userId&lt;/code>&lt;/li>
&lt;li>&lt;code>locale&lt;/code>&lt;/li>
&lt;li>&lt;code>clientId&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>This location does NOT support action types.&lt;/p>
&lt;h3 id="new-element-tab">New Element tab&lt;/h3>
&lt;p>This is the menu option for &lt;code>+ menu -&amp;gt; Add application&lt;/code> inside a document . After menu click, a new tab will be created with the action url associated with this extension.&lt;/p>
&lt;p>&lt;img src="https://onshape-public.github.io/images/extensionsimage09.png" alt="image alt text">&lt;/p>
&lt;p>Supported contexts:&lt;/p>
&lt;ul>
&lt;li>There are no supported contexts.&lt;/li>
&lt;/ul>
&lt;p>Supported parameters for replacement:&lt;/p>
&lt;ul>
&lt;li>Parameter replacement not supported.&lt;/li>
&lt;/ul>
&lt;p>Default parameters as query string:&lt;/p>
&lt;ul>
&lt;li>&lt;code>documentId&lt;/code>&lt;/li>
&lt;li>&lt;code>workspaceId&lt;/code>&lt;/li>
&lt;li>&lt;code>versionId&lt;/code>&lt;/li>
&lt;li>&lt;code>elementId&lt;/code>&lt;/li>
&lt;li>&lt;code>server&lt;/code>&lt;/li>
&lt;li>&lt;code>companyId&lt;/code> - Default value is ‘cad’. If the document owner is company/enterprise, then the value is company/enterprise ID.&lt;/li>
&lt;li>&lt;code>userId&lt;/code>&lt;/li>
&lt;li>&lt;code>locale&lt;/code>&lt;/li>
&lt;li>&lt;code>clientId&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>This location supports action types.&lt;/p>
&lt;h3 id="part-number-generator">Part number generator&lt;/h3>
&lt;p>This extension helps partners to embed their own custom part number generation scheme in Onshape. Each application can have only one extension of this type. Once defined, these extensions are listed as one of the part numbering schemes in the release management configuration in Company settings.&lt;/p>
&lt;p>&lt;img src="https://onshape-public.github.io/images/extensionsimage10.png" alt="image alt text">&lt;/p>
&lt;p>In the above screen shot, ‘Part number generation scheme’ is the user-defined name of the extension.&lt;/p>
&lt;p>Supported contexts:&lt;/p>
&lt;ul>
&lt;li>There are no supported contexts.&lt;/li>
&lt;/ul>
&lt;p>Supported parameters for replacement:&lt;/p>
&lt;ul>
&lt;li>Parameter replacement is not supported.&lt;/li>
&lt;/ul>
&lt;p>Default parameters as query string:&lt;/p>
&lt;ul>
&lt;li>No default query parameters&lt;/li>
&lt;/ul>
&lt;p>Action URL defined by the user is assumed to be a POST API. This API should consume a predefined request body as shown below. This definition may have additional attributes in future.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-js" data-lang="js">&lt;span style="display:flex;">&lt;span> [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;id&amp;#34;&lt;/span> : &amp;lt;internal part number id&amp;gt;,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;documentId&amp;#34;&lt;/span> : &amp;lt;documentId&amp;gt;,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;elementId&amp;#34;&lt;/span> : &amp;lt;elementId&amp;gt;,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;workspaceId&amp;#34;&lt;/span> : &amp;lt;workspaceId&amp;gt;,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;elementType&amp;#34;&lt;/span> : &amp;lt;elementType&amp;gt;,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;partId&amp;#34;&lt;/span> : &amp;lt;partId&amp;gt;,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;companyId&amp;#34;&lt;/span> : &amp;lt;companyId&amp;gt;, &lt;span style="color:#aaa;font-style:italic">// Id of the company that owns the document, else the text “cad”
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#aaa;font-style:italic">&lt;/span> &lt;span style="color:#a50">&amp;#34;partNumber&amp;#34;&lt;/span> : &amp;lt;current part number&amp;gt;,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;configuration&amp;#34;&lt;/span> : &amp;lt;configuration string&amp;gt;,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;categories&amp;#34;&lt;/span> : &amp;lt;array &lt;span style="color:#00a">of&lt;/span> category ids and names&amp;gt; &lt;span style="color:#aaa;font-style:italic">// [ { &amp;#34;id&amp;#34;: &amp;lt;String&amp;gt;, &amp;#34;name&amp;#34;: &amp;lt;string&amp;gt; } ]
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#aaa;font-style:italic">&lt;/span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>Note&lt;/strong>: Categories are only passed from the Release dialog and properties dialogs for now. They are empty when part number generation is called from the BOM table or configuration table.&lt;/p>
&lt;p>Expected response sent to Onshape is as follows:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-js" data-lang="js">&lt;span style="display:flex;">&lt;span> [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;id&amp;#34;&lt;/span> : &amp;lt;internal part number id&amp;gt;,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;documentId&amp;#34;&lt;/span> : &amp;lt;documentId&amp;gt;,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;elementId&amp;#34;&lt;/span> : &amp;lt;elementId&amp;gt;,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;workspaceId&amp;#34;&lt;/span> : &amp;lt;workspaceId&amp;gt;,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;elementType&amp;#34;&lt;/span> : &amp;lt;elementType&amp;gt;,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;partId&amp;#34;&lt;/span> : &amp;lt;partId&amp;gt;,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;partNumber&amp;#34;&lt;/span> : &amp;lt;next part number generated by third party numbering scheme&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Third-party applications can simply fill the &lt;code>&amp;quot;partNumber&amp;quot;&lt;/code> attribute with the part number generated by the custom numbering scheme and send it as a response. However, the response should at least contain &lt;code>&amp;quot;id&amp;quot;&lt;/code> and &lt;code>&amp;quot;partNumber&amp;quot;&lt;/code> as highlighted above; other attributes are optional.&lt;/p>
&lt;p>Custom numbering schemes for part generation, once set in the Release management page, can be invoked from all the places where we set part numbers, including the Release candidate dialog shown below:&lt;/p>
&lt;p>&lt;img src="https://onshape-public.github.io/images/extensionsimage11.png" alt="image alt text">&lt;/p>
&lt;h2 id="sample-code">Sample code&lt;/h2>
&lt;p>We have provided a sample application that supports the features described in this document.&lt;/p>
&lt;p>The source code for this &lt;code>Inventory management&lt;/code> application can be found &lt;a href="https://github.com/onshape-public/inventory-oauth2-app">in our public GitHub repository&lt;/a>.&lt;/p>
&lt;p>The instructions to install and the application are available in the &lt;code>README.md&lt;/code> file in the repository.&lt;/p>
&lt;p>The application is built on the Passport node module. It is based on this &lt;a href="http://scottksmith.com/blog/2014/05/02/building-restful-apis-with-node/">article&lt;/a>. Please read the article before proceeding with this section.&lt;/p>
&lt;p>Some structural information about the application:&lt;/p>
&lt;ul>
&lt;li>The dependencies are defined in &lt;code>package.json&lt;/code>&lt;/li>
&lt;li>The routing for inbound calls is defined in &lt;code>server.js&lt;/code>. This includes routing for OAuth2 calls as well as calls for the rest APIs we expose that Onshape can call via the extensions.&lt;/li>
&lt;li>The OAuth2 calls are routed to &lt;code>controllers/oauth2.js&lt;/code>. These include calls to authenticate as calls to get the bearer token.&lt;/li>
&lt;li>&lt;code>controllers/oauth2.js&lt;/code> uses &lt;code>controllers/auth.js&lt;/code> to interact with Passport to manage the authentication and storage.&lt;/li>
&lt;li>Other API calls to get part number, etc, route to the appropriate controller in the controllers directory.&lt;/li>
&lt;li>The controllers use the model defined in the model directory.&lt;/li>
&lt;/ul>
&lt;p>The application is defined in the Developer Portal with extensions that use the exposed APIs.&lt;/p>
&lt;p>The following screenshots define the base configuration of the application and some of the sample extensions.&lt;/p></description></item><item><title>Docs: Client Messaging</title><link>https://onshape-public.github.io/docs/app-dev/clientmessaging/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://onshape-public.github.io/docs/app-dev/clientmessaging/</guid><description>
&lt;p>Application extensions and the Onshape JavaScript web client need to communicate directly, calling across the iframe containing the application extension using post message.&lt;/p>
&lt;p>&lt;img src="https://onshape-public.github.io/images/javascriptpostmessageimage00.png" alt="image alt text">&lt;/p>
&lt;p>Onshape Client Messaging examples can be split into those that are initiated from the &lt;em>application extension&lt;/em> and those that are initiated from the &lt;em>Onshape client&lt;/em>.&lt;/p>
&lt;h2 id="messages-from-the-extension">Messages from the Extension&lt;/h2>
&lt;p>These Client Messaging examples can be initiated from the application extension:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Click/close flyouts events&lt;/strong>: Notify the Onshape client that the user has clicked in the application extension, which should cause Onshape flyouts (versions, history, uploads, etc.) and dropdown menus (profile dropdown menu, document menu) to close. Without this, flyouts and menus might remain open over the application extension.&lt;/li>
&lt;li>&lt;strong>Shortcut keyboard events&lt;/strong>: Shortcut keys (such as &lt;code>?&lt;/code>, which opens the Onshape Help dialog), can be handled by the application extension by posting a message to the Onshape client to open the dialog.&lt;/li>
&lt;li>&lt;strong>keepAlive&lt;/strong>: Notify the Onshape client that the user is actively working in the application extension, which triggers the Onshape client to send a message to the server to keep the browser session alive. Without this, the Onshape browser session will timeout and ask the user to sign in again.&lt;/li>
&lt;li>&lt;strong>Standard Onshape dialogs&lt;/strong>: Request from the application extension to the Onshape client to open one of the Onshape standard dialogs and send the user’s choices back to the application extension. For example, if the application extension needs the user to choose a part or assembly to be operated on, the application extension can post a message to the Onshape client requesting that dialog be opened and the selected part or assembly information sent back to the application extension.&lt;/li>
&lt;li>&lt;strong>UI customization&lt;/strong>&amp;quot;: Request from the application extension to the Onshape client to customize the Onshape UI (e.g., add commands to menus, add buttons to the toolbars, etc). When these commands or toolbar buttons are clicked, the Onshape client posts a message to the application extension with the available context.
&lt;ul>
&lt;li>&lt;strong>Note&lt;/strong>: This is limited to cases where the application extension is made active by the user; application extensions are not automatically loaded when a document is opened. Most UI customizations should be done when you register the application with Onshape, as those change the Onshape client automatically without needing to load the application extension first.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Content/material insertion&lt;/strong>: Request from the application extension to insert content into the Onshape document. For example, insert a part into a new or existing Part Studio, apply a material to a part, add a material to a material library, etc.&lt;/li>
&lt;/ul>
&lt;h2 id="messages-from-onshape">Messages from Onshape&lt;/h2>
&lt;p>The following examples can be initiated from the Onshape client:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>User action notification&lt;/strong>: The Onshape client can notify an application extension when various user actions occur. For example, the Onshape client might notify when the user has made the application extension active or inactive (when the user clicks on document tabs). When an application extension is made inactive, it is moved off the edges of the browser, so it cannot be seen, but is still active, preserving its state.&lt;/li>
&lt;li>&lt;strong>Printing&lt;/strong>: The Onshape client can notify an application extension when the user has chosen the &lt;strong>Print&lt;/strong> command from the main Onshape document menu, enabling the application extension to perform a print operation.&lt;/li>
&lt;/ul>
&lt;h2 id="security-considerations">Security Considerations&lt;/h2>
&lt;p>To ensure security, an application extension must:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Parse for document, workspace, and element IDs&lt;/strong>: Parse for the &lt;code>documentId&lt;/code>, &lt;code>workspaceId&lt;/code>, and &lt;code>elementId&lt;/code> that were passed as query parameters within the application extension’s iframe &lt;code>src&lt;/code> URL. You must post these back in each &lt;code>POST&lt;/code> message.&lt;/li>
&lt;li>&lt;strong>Parse for the server&lt;/strong>: Parse for the &lt;code>server&lt;/code> that was passed as a query parameter within the application extension’s iframe &lt;code>src&lt;/code> URL. You must use this to validate messages received.
&lt;ul>
&lt;li>If the application extension uses a JavaScript library or framework (e.g., BackboneJS or AngularJS), it can parse the query parameters and maintain state in other ways.&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>&lt;strong>Not redirect to another base URL&lt;/strong>: The browser tells the Onshape client the origin base URL from which a &lt;code>POST&lt;/code> message is received. The Onshape client ignores messages posted from an origin URL that doesn’t match the original iframe &lt;code>src&lt;/code> URL. It is &lt;em>extremely important&lt;/em> to the security of your application that you verify that the origin of all messages you receive is the same as the original server query parameter in the iframe &lt;code>src&lt;/code> (i.e., &lt;code>if (server === e.origin)&lt;/code>). In production operation especially, the message IS NOT SAFE if the message origin does not match the iframe &lt;code>src&lt;/code> server query parameter. Application extensions should not redirect to another base URL after the iframe has been opened, or the messages will be ignored.&lt;/li>
&lt;li>&lt;strong>Post a message on startup&lt;/strong>: Onshape will not post messages until a newly started application extension has first posted a valid message to Onshape. This constraint is in effect anytime an application extension is (re)started and exists to avoid posting messages to application extensions that are not ready to handle them, are not fully loaded, etc. After your application extension is fully loaded and ready to receive messages, post a message to Onshape. A &lt;code>keepAlive&lt;/code> message is a great first message to send to Onshape. Once Onshape receives a valid message, Onshape will start posting messages to the application extension. If the application extension later sends an invalid message Onshape will stop sending messages until a valid message is posted to Onshape.&lt;/li>
&lt;/ul>
&lt;p>&lt;code>POST&lt;/code> messages submitted by application extensions to Onshape will be ignored if any of the following are true:&lt;/p>
&lt;ul>
&lt;li>The documentId, workspaceId, or elementId are missing or not valid.&lt;/li>
&lt;li>The message name is missing or not recognized.&lt;/li>
&lt;li>The origin of the &lt;code>POST&lt;/code> message does not match the original iframe &lt;code>src&lt;/code> URL.&lt;/li>
&lt;/ul>
&lt;h2 id="element-tab">Element Tab&lt;/h2>
&lt;p>Messages may be sent and received by element tab application extensions.&lt;/p>
&lt;p>The following messages can be &lt;strong>sent&lt;/strong> by Element tab application extensions:&lt;/p>
&lt;table>
&lt;tr>
&lt;td>messageName
(case sensitive)&lt;/td>
&lt;td>other message properties?&lt;/td>
&lt;td>comment&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>applicationInit&lt;/td>
&lt;td>yes
&lt;pre>&lt;code>notifyWhenSaveRequired: whether Onshape should send a notification to save pending changes during certain operations
(default is false)
&lt;/code>&lt;/pre>
&lt;/td>
&lt;td>Send once on application startup.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>closeFlyoutsAndMenus&lt;/td>
&lt;td>no&lt;/td>
&lt;td>Send when a mouse click or other event happens in the application extension. Closes Onshape flyouts and dropdown menus.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>closeSelectItemDialog&lt;/td>
&lt;td>no&lt;/td>
&lt;td>Closes the select item dialog.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>connectionLost&lt;/td>
&lt;td>no&lt;/td>
&lt;td>Displays the standard Onshape connection lost message in a message bubble, forcing the user to either reload the document or return to the documents page.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>errorReload&lt;/td>
&lt;td>yes
&lt;pre>&lt;code>message: your message
&lt;/code>&lt;/pre>
&lt;/td>
&lt;td>Similar to the connectionLost message, but enables an application to specify the first part of the message, which will be used instead of "Onshape is not connected." The user must reload the document or return to the documents page.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>finishedSaving&lt;/td>
&lt;td>yes
&lt;pre>&lt;code>messageId: the id sent in the corresponding 'saveChanges' message
&lt;/code>&lt;/pre>
&lt;/td>
&lt;td>Response to a 'saveChanges' message sent from Onshape. Should be sent after application has cleaned up any pending edits.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>keepAlive&lt;/td>
&lt;td>no&lt;/td>
&lt;td>Send periodically while while the user is actively working to avoid the session from timing out.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>saveAVersion&lt;/td>
&lt;td>no&lt;/td>
&lt;td>Send when the user types “Shift-S” in the application extension, the keyboard shortcut for save a version.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>showKeyboardShortcutsHelp&lt;/td>
&lt;td>no&lt;/td>
&lt;td>Send when the user types “?” (Shift-? on most keyboards) in the application extension, the keyboard shortcut for the keyboard shortcuts help dialog.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>showMessageBubble&lt;/td>
&lt;td>yes
&lt;pre>&lt;code>message: your message
&lt;/code>&lt;/pre>
&lt;/td>
&lt;td>Send when you want to show a string in the blue message bubble at the top of the Onshape app.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>startLoadingSpinner&lt;/td>
&lt;td>yes
&lt;pre>&lt;code>message: your message
&lt;/code>&lt;/pre>
&lt;/td>
&lt;td>Send to start a large spinner in the middle of the browser window with your message underneath it.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>stopLoadingSpinner&lt;/td>
&lt;td>no&lt;/td>
&lt;td>Send to stop the large spinner.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>startWorkingSpinner&lt;/td>
&lt;td>no&lt;/td>
&lt;td>Send to start a small spinner in the middle bottom of the browser window.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>stopWorkingSpinner&lt;/td>
&lt;td>no&lt;/td>
&lt;td>Send to stop the small spinner.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>openSelectItemDialog&lt;/td>
&lt;td>yes
&lt;pre>&lt;code>dialogTitle: your dialog title
(default is no title),
selectBlobs: true or false
(default is false),
selectParts: true or false
(default is false),
selectPartStudios: true or false
(default is false),
selectAssemblies: true or false
(default is false),
selectMultiple: true or false
(default is false),
selectBlobMimeTypes: ‘comma-delimited string of blob mime types to show in dialog (e.g. “application/dwt,application/dwg”)’
(default is an empty string)
showBrowseDocuments: true or false - controls whether ‘Other documents’ choice should be available
(default is true)
showStandardContent: true or false - controls whether ‘Standard content’ choice should be available
(default is false)
&lt;/code>&lt;/pre>
&lt;/td>
&lt;td>Send when your application wants to open a dialog in which the user will select one or multiple items - blobs, parts, part studios or assemblies.
&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>requestCameraProperties&lt;/td>
&lt;td>yes
&lt;pre>&lt;code>graphicsElementId: string , Element ID of the part studio or assembly
&lt;/code>&lt;/pre>
&lt;/td>
&lt;td>
Send to request camera properties of a specific part studio or assembly element. Note: The element should have been opened at least once in the current session. The messageName of the response is cameraProperties
&lt;/td>
&lt;/tr>
&lt;/table>
&lt;p>The following messages can be &lt;strong>received&lt;/strong> by Element tab application extensions:&lt;/p>
&lt;table>
&lt;tr>
&lt;td>messageName
(case sensitive)&lt;/td>
&lt;td>other message properties?&lt;/td>
&lt;td>comment&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>show&lt;/td>
&lt;td>no&lt;/td>
&lt;td>Sent when an element tab application extension is shown (made active) within the Onshape client. This message is NOT sent when the element tab application extension is created.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>hide&lt;/td>
&lt;td>no&lt;/td>
&lt;td>Sent when an element tab application extension is made inactive within the Onshape client. This message is NOT sent when an element tab application extension is deleted.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>itemSelectedInSelectItemDialog&lt;/td>
&lt;td>yes
&lt;pre>&lt;code>documentId: id of selected item’s document,
workspaceId: id of selected item’s workspace, empty if versionId not empty,
versionId: id of selected item’s version, empty if workspaceId not empty,
elementId: id of element selected or containing the selected part,
elementName: name of element selected or containing the selected part,
elementType: type of element selected or containing the selected part - ‘partstudio’, ‘assembly’ or ‘blob’,
elementMicroversionId: microversion id of the element,
itemType: type of item selected: ‘part’,‘partStudio’ or ‘assembly’,
partName: name of part selected, empty if itemType is not ‘part’,
idTag: id of part, empty if no part selected
&lt;/code>&lt;/pre>
&lt;/td>
&lt;td>Sent when the user selects an item (blob, part, part studio or assembly) in the select item dialog that was opened due to an openSelectItemDialog message sent earlier.
When a part is not selected, the partXxx message properties will be empty strings.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>print&lt;/td>
&lt;td>no&lt;/td>
&lt;td>Sent when the user chooses the Print command while the application is the active element. The application can choose to handle this as either a print or an export to a PDF or other format.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>selectItemDialogClosed&lt;/td>
&lt;td>no&lt;/td>
&lt;td>Sent when the select item dialog closes, either because the user selected an item and selectMultiple is false, or the user changed the active element or the user closed the dialog with the "X" button.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>startFirstViewCommand&lt;/td>
&lt;td>yes
&lt;pre>&lt;code>documentId: id of selected item’s document,
workspaceId: id of selected item’s workspace, empty if versionId not empty,
versionId: id of selected item’s version, empty if workspaceId not empty,
elementId: id of element selected or containing the selected part,
elementName: name of element selected or containing the selected part,
elementType: type of element selected or containing the selected part - ‘partstudio’, ‘assembly’ or ‘blob’,
elementMicroversionId: microversion id of the element,
itemType: type of item selected: ‘part’,‘partstudio’ or ‘assembly’,
partName: name of part selected, empty if itemType is not ‘part’,
idTag: id of part
&lt;/code>&lt;/pre>
&lt;/td>
&lt;td>Sent to a drawings application extension when the drawing is created with zero views.
&lt;p>If other types of applications need a message posted to them with creation context, contact Onshape and we can discuss using this sort of message for your application also.&lt;/td>&lt;/p>
&lt;/tr>
&lt;tr>
&lt;td>export&lt;/td>
&lt;td>yes
&lt;pre>&lt;code>fileExtension: the file extension of the export type the user chose - “.dwg”, “.dxf” are the types currently supported.
baseFileName: the base portion of the expected output file. This is currently set to “&amp;lt;document name&amp;gt; - &amp;lt;element name&amp;gt;”
&lt;/code>&lt;/pre>
&lt;/td>
&lt;td>Sent when the user chooses a command to export the contents of the application to a file.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>cameraProperties&lt;/td>
&lt;td>yes
&lt;pre>&lt;code>graphicsElementId: string , Element ID of the part studio or assembly
isValid: boolean, Indicates if the properties are valid or not. false if element ID is invalid or element has not been open in the current session
projectionType: string, Denotes the projection method. Values are ‘orthographic’, ‘perspective’ . Empty string ‘’ if isValid is false
viewMatrix: 16 element numeric matrix with elements at index 13, 14, 15 corresponding to position of the camera
projectionMatrix: 16 element numeric matrix
verticalFieldOfView: number, 0 in case of orthographic projection
viewportHeight: number, eight of the viewport
viewportWidth: number, width of the viewport
&lt;/code>&lt;/pre>
&lt;/td>
&lt;td>Sent when application posts a requestCameraProperties message&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>takeFocus&lt;/td>
&lt;td>no&lt;/td>
&lt;td>Sent when the Onshape client sets focus on the content window of the element tab application extension.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>saveChanges&lt;/td>
&lt;td>yes
&lt;pre>&lt;code>messageId: a unique identifier for this message. Should be passed back in the 'finishedSaving' message.
&lt;/code>&lt;/pre>
&lt;/td>
&lt;td>Sent if the application specified 'notifyWhenSaveRequired' in the 'applicationInit' message. Indicates that the application should cleanup any pending edits before an Onshape process continues (i.e. version save).&lt;/td>
&lt;/tr>
&lt;/table>
&lt;h2 id="element-right-panel">Element Right Panel&lt;/h2>
&lt;p>Most client messaging functionality had been limited to that occurring between the Onshape client and application elements (the &lt;strong>Element tab&lt;/strong> location). Limited functionality in now also available for client messaging to work with application extensions in the &lt;strong>Element right panel&lt;/strong> location.&lt;/p>
&lt;p>Enabled messaging to Element right panel extensions includes the communication of selections that the user makes for the following application extension contexts:&lt;/p>
&lt;ul>
&lt;li>Part Studio&lt;/li>
&lt;li>Assembly&lt;/li>
&lt;li>Document&lt;/li>
&lt;/ul>
&lt;p>All &lt;a href="#security-considerations">Security Considerations&lt;/a> above apply to both Element tab and Element right panel extensions, with the following notes:&lt;/p>
&lt;ul>
&lt;li>Initial message from the application extension to the Onshape client, in the form of an &lt;code>applicationInit&lt;/code> message (or one of any other messages supported by the element right panel extensions), is required to ensure the Onshape client does not send messages to the extension until it is ready.&lt;/li>
&lt;li>Once a valid &lt;code>applicationInit&lt;/code> message is received by the Onshape client, it will start sending messages with the &lt;code>messageName&lt;/code> value &lt;code>SELECTION&lt;/code> upon user selection interactions.&lt;/li>
&lt;li>Prior to accepting &lt;em>any&lt;/em> message from the Onshape client as secure, the &lt;code>origin&lt;/code> attribute value included in incoming messages must be validated as equal to the original &lt;code>server&lt;/code> query parameter value used to load the application extension.&lt;/li>
&lt;/ul>
&lt;h2 id="code-snippets">Code Snippets&lt;/h2>
&lt;h3 id="parse-query-parameters">Parse query parameters&lt;/h3>
&lt;p>This JavaScript code parses the iframe &lt;code>src&lt;/code> query parameters and uses them to post a message:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-js" data-lang="js">&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a">var&lt;/span> documentId;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a">var&lt;/span> workspaceId;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a">var&lt;/span> elementId;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a">var&lt;/span> server;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#aaa;font-style:italic">// Parse query parameters
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#aaa;font-style:italic">&lt;/span> &lt;span style="color:#00a">var&lt;/span> queryParameters = &lt;span style="color:#0aa">decodeURIComponent&lt;/span>(&lt;span style="color:#0aa">window&lt;/span>.location.search.substr(&lt;span style="color:#099">1&lt;/span>));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a">var&lt;/span> queryParametersArray = queryParameters.split(&lt;span style="color:#a50">&amp;#39;&amp;amp;&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a">for&lt;/span> (&lt;span style="color:#00a">var&lt;/span> i = &lt;span style="color:#099">0&lt;/span>; i &amp;lt; queryParametersArray.length; i++) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a">var&lt;/span> parameterArray = queryParametersArray[i].split(&lt;span style="color:#a50">&amp;#39;=&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a">if&lt;/span> (parameterArray.length === &lt;span style="color:#099">2&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a">switch&lt;/span> (parameterArray[&lt;span style="color:#099">0&lt;/span>]) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a">case&lt;/span> &lt;span style="color:#a50">&amp;#39;documentId&amp;#39;&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> documentId = parameterArray[&lt;span style="color:#099">1&lt;/span>];
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a">break&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a">case&lt;/span> &lt;span style="color:#a50">&amp;#39;workspaceId&amp;#39;&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> workspaceId = parameterArray[&lt;span style="color:#099">1&lt;/span>];
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a">break&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a">case&lt;/span> &lt;span style="color:#a50">&amp;#39;elementId&amp;#39;&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> elementId = parameterArray[&lt;span style="color:#099">1&lt;/span>];
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a">break&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a">case&lt;/span> &lt;span style="color:#a50">&amp;#39;server&amp;#39;&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> server = parameterArray[&lt;span style="color:#099">1&lt;/span>];
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a">break&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#aaa;font-style:italic">// Listen for clicks and post a message to the Onshape client
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#aaa;font-style:italic">&lt;/span> &lt;span style="color:#0aa">document&lt;/span>.getElementById(&lt;span style="color:#a50">&amp;#39;&amp;lt;id of your topmost element&amp;gt;&amp;#39;&lt;/span>).
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> addEventListener(&lt;span style="color:#a50">&amp;#39;click&amp;#39;&lt;/span>, &lt;span style="color:#00a">function&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a">var&lt;/span> message = {documentId: documentId,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> workspaceId: workspaceId,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> elementId: elementId,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> messageName: &lt;span style="color:#a50">&amp;#39;closeFlyoutsAndMenus&amp;#39;&lt;/span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#0aa">window&lt;/span>.parent.postMessage(message, &lt;span style="color:#a50">&amp;#39;*&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }, &lt;span style="color:#00a">true&lt;/span>);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="create-a-message-object">Create a message object&lt;/h3>
&lt;p>The message object posted to the Onshape client is of the form:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-js" data-lang="js">&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> documentId: documentId,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> workspaceId: workspaceId,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> elementId: elementId,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> messageName: &lt;span style="color:#a50">&amp;#39;&amp;lt;message name&amp;gt;&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#aaa;font-style:italic">// … other properties as needed for other message types …
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#aaa;font-style:italic">&lt;/span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>The message data object posted to the application extension is of the form:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-js" data-lang="js">&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> messageName: &lt;span style="color:#a50">&amp;#39;&amp;lt;message name&amp;gt;&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#aaa;font-style:italic">// … other properties as needed for other message types …
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#aaa;font-style:italic">&lt;/span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>The message will always have a &lt;code>messageName&lt;/code> property.&lt;/p>
&lt;h3 id="listen-for-messages">Listen for messages&lt;/h3>
&lt;p>To listen for messages from the Onshape client:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-js" data-lang="js">&lt;span style="display:flex;">&lt;span> &lt;span style="color:#aaa;font-style:italic">// server is one of the iframe src query parameters - see above
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#aaa;font-style:italic">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a">var&lt;/span> handlePostMessage = &lt;span style="color:#00a">function&lt;/span>(e) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> console.log(&lt;span style="color:#a50">&amp;#34;Post message received in application extension.&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> console.log(&lt;span style="color:#a50">&amp;#34;e.origin = &amp;#34;&lt;/span> + e.origin);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#aaa;font-style:italic">// Verify the origin matches the server iframe src query parameter
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#aaa;font-style:italic">&lt;/span> &lt;span style="color:#00a">if&lt;/span> (server === e.origin) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> console.log(&lt;span style="color:#a50">&amp;#34;Message safe and can be handled as it is from origin &amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> + e.origin +
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;&amp;#39;, which matches server query parameter &amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> + server + &lt;span style="color:#a50">&amp;#34;&amp;#39;.&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a">if&lt;/span> (e.data &amp;amp;&amp;amp; e.data.messageName) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> console.log(&lt;span style="color:#a50">&amp;#34;Message name = &amp;#39;&amp;#34;&lt;/span> + e.data.messageName + &lt;span style="color:#a50">&amp;#34;&amp;#39;&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#00a">else&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> console.log(&lt;span style="color:#a50">&amp;#34;Message name not found. Ignoring message.&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#00a">else&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> console.log(&lt;span style="color:#a50">&amp;#34;Message NOT safe and should be ignored.&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> };
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#0aa">window&lt;/span>.addEventListener(&lt;span style="color:#a50">&amp;#39;message&amp;#39;&lt;/span>, handlePostMessage, &lt;span style="color:#00a">false&lt;/span>);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="send-and-handle-messages">Send and handle messages&lt;/h3>
&lt;p>The following is an example of how one might send an initialization message to, and handle post messages from, the Onshape client.&lt;/p>
&lt;blockquote>
&lt;p>&lt;em>&lt;strong>Note:&lt;/strong>&lt;/em> Proper clean-up of event listeners is not included in the snippet&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-javascript" data-lang="javascript">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a">function&lt;/span> handlePostMessage(event) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#aaa;font-style:italic">// ensure that the event data is from a legit source:
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#aaa;font-style:italic">&lt;/span> &lt;span style="color:#00a">if&lt;/span>(theServerStringFromActionUrl !== event.origin) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> console.error(&lt;span style="color:#a50">&amp;#39;origin of message is not legitimate&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a">return&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#aaa;font-style:italic">// branch based on messageName attribute
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#aaa;font-style:italic">&lt;/span> &lt;span style="color:#00a">switch&lt;/span>(event.data.messageName) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a">case&lt;/span> &lt;span style="color:#a50">&amp;#39;SELECTION&amp;#39;&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> console.debug(&lt;span style="color:#a50">&amp;#39;SELECTION event data: %o&amp;#39;&lt;/span>, event.data);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a">break&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#00a">default&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> console.debug(&lt;span style="color:#a50">`&lt;/span>&lt;span style="color:#a50">${&lt;/span>event.data.messageName&lt;span style="color:#a50">}&lt;/span>&lt;span style="color:#a50"> not handled`&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#0aa">window&lt;/span>.addEventListener(&lt;span style="color:#a50">&amp;#39;message&amp;#39;&lt;/span>, handlePostMessage);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#00a">const&lt;/span> initMessage = {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> documentId: theDocumentId, &lt;span style="color:#aaa;font-style:italic">// required - parsed from action url
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#aaa;font-style:italic">&lt;/span> workspaceId: theWorkspaceId, &lt;span style="color:#aaa;font-style:italic">// required - parsed from action url
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#aaa;font-style:italic">&lt;/span> elementId: theElementId, &lt;span style="color:#aaa;font-style:italic">// required - parsed from action url
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#aaa;font-style:italic">&lt;/span> messageName: &lt;span style="color:#a50">&amp;#39;applicationInit&amp;#39;&lt;/span> &lt;span style="color:#aaa;font-style:italic">// required
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#aaa;font-style:italic">&lt;/span>};
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#0aa">window&lt;/span>.parent.postMessage(initMessage, &lt;span style="color:#a50">&amp;#39;*&amp;#39;&lt;/span>);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="right-panel-interaction-sequence">Right panel interaction sequence&lt;/h3>
&lt;p>The sequence diagram below illustrates the interaction between an Element right panel application extension and the Onshape client:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-js" data-lang="js">&lt;span style="display:flex;">&lt;span>%%{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> init: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;theme&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;default&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;sequence&amp;#34;&lt;/span>: {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;mirrorActors&amp;#34;&lt;/span>: &lt;span style="color:#00a">false&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;showSequenceNumbers&amp;#34;&lt;/span>: &lt;span style="color:#00a">false&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;width&amp;#34;&lt;/span>: &lt;span style="color:#099">75&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;height&amp;#34;&lt;/span>: &lt;span style="color:#099">60&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;actorMargin&amp;#34;&lt;/span>: &lt;span style="color:#099">25&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;messageFontSize&amp;#34;&lt;/span>: &lt;span style="color:#099">13&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;messageFontFamily&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;monospace&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#34;messageFontWeight&amp;#34;&lt;/span>: &lt;span style="color:#099">2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}%%
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sequenceDiagram
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> actor user
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> participant OSC AS Onshape Client
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> participant AE AS Application Extension
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> user-&amp;gt;&amp;gt;+OSC: start element right panel extension
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Note right &lt;span style="color:#00a">of&lt;/span> user: via configured button
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> OSC-&amp;gt;&amp;gt;+AE: invoke action url (&lt;span style="color:#00a">with&lt;/span> query params)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> AE-&amp;gt;&amp;gt;OSC: postMessage(messageName: &lt;span style="color:#a50">&amp;#39;applicationInit&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> loop selection interactions
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> user-&amp;gt;&amp;gt;OSC: select
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> OSC-&amp;gt;&amp;gt;AE: postMessage(messageName: &lt;span style="color:#a50">&amp;#39;SELECTION&amp;#39;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> end
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> user-&amp;gt;&amp;gt;OSC: stop element right panel extension
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Note right &lt;span style="color:#00a">of&lt;/span> user: via configured button
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> deactivate AE
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> OSC-XAE: destroy
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> deactivate OSC
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="right-panel-message-exchange">Right panel message exchange&lt;/h3>
&lt;p>The following messages are exchanged for application extensions located in the element right panel and configured for Part Studio, Assembly, or Document contexts.&lt;/p>
&lt;p>The first message with &lt;code>messageName&lt;/code> attribute set to &lt;code>applicationInit&lt;/code> is sent to the Onshape client by an application extension once it is loaded and ready to receive and process incoming messages:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-js" data-lang="js">&lt;span style="display:flex;">&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> documentId: &lt;span style="color:#a50">&amp;#39;&amp;lt;document id&amp;gt;&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> workspaceId: &lt;span style="color:#a50">&amp;#39;&amp;lt;workspace id&amp;gt;&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> elementId: &lt;span style="color:#a50">&amp;#39;&amp;lt;element id&amp;gt;&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> messageName: &lt;span style="color:#a50">&amp;#39;applicationInit&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>The values &lt;code>&amp;lt;document id&amp;gt;&lt;/code>, &lt;code>&amp;lt;workspace id&amp;gt;&lt;/code>, &lt;code>&amp;lt;element id&amp;gt;&lt;/code>, and &lt;code>&amp;lt;server id&amp;gt;&lt;/code>:&lt;/p>
&lt;ul>
&lt;li>Are originally included as query parameters in the action URL used to request the content of the application extension&lt;/li>
&lt;li>Must be included in messages sent to the Onshape client&lt;/li>
&lt;/ul>
&lt;p>While initialization is the specific intent of the &lt;code>applicationInit&lt;/code> message, other supported &lt;code>messageName&lt;/code> attributes have the same initialization effect upon their first receipt by the Onshape client.&lt;/p>
&lt;p>Next, as the user interacts with Onshape by selecting various parts of the model, messages with the &lt;code>messageName&lt;/code> attribute set to &lt;code>SELECTION&lt;/code> are sent to the application extension:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-js" data-lang="js">&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> messageName: &lt;span style="color:#a50">&amp;#39;SELECTION&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> selections: [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> selectionType: &lt;span style="color:#a50">&amp;#39;ENTITY&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> selectionId: &lt;span style="color:#a50">&amp;#39;KRiB&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> entityType: &lt;span style="color:#a50">&amp;#39;FACE&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> occurrencePath: [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#39;MfOieM8xKIDGHe37c&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> workspaceMicroversionId: &lt;span style="color:#a50">&amp;#39;a781c53fbd1095e3462d2b70&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> },
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> selectionType: &lt;span style="color:#a50">&amp;#39;ENTITY&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> selectionId: &lt;span style="color:#a50">&amp;#39;KRdC&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> entityType: &lt;span style="color:#a50">&amp;#39;EDGE&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> occurrencePath: [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a50">&amp;#39;MfOieM8xKIDGHe37c&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ],
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> workspaceMicroversionId: &lt;span style="color:#a50">&amp;#39;a781c53fbd1095e3462d2b70&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="notes">Notes&lt;/h2>
&lt;h3 id="keyboard-focus">Keyboard focus&lt;/h3>
&lt;p>Keyboard focus will not be transferred to an application until the user clicks in the application or the application programmatically takes focus. An application should programmatically take focus when it is first loaded and when it receives a &lt;code>show&lt;/code> message from Onshape. Shortcut keys will work immediately when the application is shown.&lt;/p>
&lt;h3 id="future-work">Future work&lt;/h3>
&lt;ul>
&lt;li>New message types will be added as needed. If your application extension needs a message not listed in this document, please notify us, and we’ll work with you on it.&lt;/li>
&lt;li>Mobile client support is unclear at this time.&lt;/li>
&lt;li>Onshape is considering using promises to wrap &lt;code>POST&lt;/code> messages, which would make the application extension&amp;rsquo;s JavaScript simpler and enable chaining &lt;code>POST&lt;/code>s with other operations. Promises would make some interactions with multiple responses difficult (e.g., when you open a dialog, like the Select Item dialog, and want to receive multiple &lt;code>POST&lt;/code> messages back due to the user clicking on multiple items in the dialog).&lt;/li>
&lt;/ul></description></item><item><title>Docs: Structured Storage</title><link>https://onshape-public.github.io/docs/app-dev/structuredstorage/</link><pubDate>Mon, 18 May 2020 20:40:16 -0400</pubDate><guid>https://onshape-public.github.io/docs/app-dev/structuredstorage/</guid><description>
&lt;h2 id="sub-elements">Sub Elements&lt;/h2>
&lt;p>Onshape provides application elements storage that is controlled by applications through the API. These elements allow a set of named sub-elements.&lt;/p>
&lt;p>The application can make changes to sub-elements independently or in arbitrary groupings. Changes may be wholesale replacements, or may be deltas. When performing a delta update, the application may post a full version as well, which allows the api to return a smaller number of deltas for subsequent queries.&lt;/p>
&lt;p>An application may need to perform multiple versionable actions in the course of performing a user-level action, and we want to allow the individual actions to be collected into a single action from the perspective of document history. We do this by providing support for creation of a private transaction and support for atomically committing the transaction to the document workspace as a single user-visible action.&lt;/p>
&lt;p>Onshape does not assume any knowledge about the semantics of application deltas. All merging of deltas into a consolidated form is done by the application. Applications should typically send checkpoint state for a sub-element if many delta changes have been made since the last checkpoint.&lt;/p>
&lt;p>Document content and changes are logically an array of bytes, but since they are transmitted through JSON, then are expected to be presented a Base-64 encoding of the array into string form.&lt;/p>
&lt;p>We use some terminology in this document that is new.&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>changeId&lt;/strong> - an opaque identifier for the state of an application element. Each change to the application element results in a new changeId&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>transaction&lt;/strong> - a private workspace within a document workspace for composing modifications to an application element. These changes are not visible to the user until committed.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>transaction commit&lt;/strong> - an operation that moves the changes performed within a transaction to the application element workspace as a single user-visible action.&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Concurrent access by multiple users&lt;/strong>&lt;/p>
&lt;p>If the element is being concurrently accessed by multiple sessions, updates may encounter conflicts during update. If the application has a mechanism that ensures that all accesses to the element are mediated by a single process, as is done with our part studio and assemblies, this can be addressed directly by the application. However, if the application is not able to mediate access in this way, updates by one session may invalidate state held by another session. We address this by notifying updaters when an update cannot be directly applied because their state is out of date and allowing them to refresh their state before re-applying the change.&lt;/p>
&lt;p>This policy of requiring the application have current state when posting updates could be overly conservative in some cases. Detecting conflict at the sub-element level might provide for better concurrent access performance, but there probably are cases where this fails, so it probably would need some level of application control.&lt;/p>
&lt;h2 id="json-tree">JSON Tree&lt;/h2>
&lt;p>In contrast with sub elements, JSON tree storage is a more managed data storage mechanism that Onshape itself can merge and diff. At the root of it, the data structure is a single JSON object per Application Element. The user submits incremental changes that are then applied by Onshape to the JSON tree. Onshape stores these &amp;lsquo;diffs&amp;rsquo; in a new microversion created as a result of the update request, or during a subsequent transaction commit request. When the user then performs a merge or restore operation, Onshape can sum and apply the requisite incremental changes. By storing diffs, Onshape provides to the user a storage mechanism that is more robust to race conditions, since multiple simultaneous edits can be optionally merged by Onshape. All of these qualities make JSON tree a preferred way to store application element data in an Onshape-native manner.&lt;/p>
&lt;h3 id="json-tree-edit-semantics">JSON Tree Edit Semantics&lt;/h3>
&lt;h5 id="btjedit-encoding">BTJEdit Encoding&lt;/h5>
&lt;p>A JSON tree edit represents an incremental change to an application element&amp;rsquo;s JSON tree. The edit is a &lt;code>BTJEdit&lt;/code> class, which is encoded as one of the following:&lt;/p>
&lt;ul>
&lt;li>Deletion:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{ &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span> : &lt;span style="color:#a50">&amp;#34;BTJEditDelete-1992&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;path&amp;#34;&lt;/span> : &lt;span style="color:#a50">&amp;#34;path&amp;#34;&lt;/span> }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Insertion:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{ &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span> : &lt;span style="color:#a50">&amp;#34;BTJEditInsert-2523&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;path&amp;#34;&lt;/span> : &lt;span style="color:#a50">&amp;#34;path&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;value&amp;#34;&lt;/span> : &lt;span style="color:#a50">&amp;#34;newValue&amp;#34;&lt;/span> }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Change:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{ &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span> : &lt;span style="color:#a50">&amp;#34;BTJEditChange-2636&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;path&amp;#34;&lt;/span> : &lt;span style="color:#a50">&amp;#34;path&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;value&amp;#34;&lt;/span> : &lt;span style="color:#a50">&amp;#34;newValue&amp;#34;&lt;/span> }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Move:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{ &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span> : &lt;span style="color:#a50">&amp;#34;BTJEditMove-3245&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;sourcePath&amp;#34;&lt;/span> : &lt;span style="color:#a50">&amp;#34;path&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;destinationPath&amp;#34;&lt;/span> : &lt;span style="color:#a50">&amp;#34;path&amp;#34;&lt;/span> }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>List (where edit1, edit2, etc. are zero or more edits.):&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{ &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span> : &lt;span style="color:#a50">&amp;#34;BTJEditList-2707&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;edits&amp;#34;&lt;/span> : [ &lt;span style="color:#a50">&amp;#34;edit1&amp;#34;&lt;/span>, &lt;span style="color:#a50">&amp;#34;edit2&amp;#34;&lt;/span>, &lt;span style="color:#a50">&amp;#34;...&amp;#34;&lt;/span>] }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Within the above encoding, &lt;code>newValue&lt;/code> is a stand in for any valid JSON, and &lt;code>path&lt;/code> is a stand in for an object representing a path to the node at which to perform the edit.&lt;/p>
&lt;h5 id="btjpath-encoding">BTJPath Encoding&lt;/h5>
&lt;p>The BTJPath object describes a path through the JSON tree to a particular node, and is encoded as follows:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{ &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span> : &lt;span style="color:#a50">&amp;#34;BTJPath-3073&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;startNode&amp;#34;&lt;/span> : &lt;span style="color:#a50">&amp;#34;startNode&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;path&amp;#34;&lt;/span> : [ &lt;span style="color:#a50">&amp;#34;pathElement1&amp;#34;&lt;/span>, &lt;span style="color:#a50">&amp;#34;pathElement2&amp;#34;&lt;/span>, &lt;span style="color:#a50">&amp;#34;...&amp;#34;&lt;/span>] }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>where startNode is a string that is either empty to specify the root node or a nodeId of a node in the tree. The pathElement is one of:&lt;/p>
&lt;ul>
&lt;li>Key:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{ &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span> : &lt;span style="color:#a50">&amp;#34;BTJPathKey-3221&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;key&amp;#34;&lt;/span> : &lt;span style="color:#a50">&amp;#34;string&amp;#34;&lt;/span> }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>Index:&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{ &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span> : &lt;span style="color:#a50">&amp;#34;BTJPathIndex-1871&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;index&amp;#34;&lt;/span> : &lt;span style="color:#a50">&amp;#34;integer&amp;#34;&lt;/span> }
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>In the insertion and move type edits the path elements can describe a path that doesn&amp;rsquo;t currently exist. Onshape will generate the proper keys and values as needed to place the node value in the proper location.&lt;/p>
&lt;h3 id="json-tree-examples">JSON Tree Examples&lt;/h3>
&lt;p>Below are some examples that show the body required to perform the particular edit on a JSON tree.&lt;/p>
&lt;h4 id="deletion-example">Deletion Example&lt;/h4>
&lt;p>If the pre-existing JSON tree looks like:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;myKey&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;myValue&amp;#34;&lt;/span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>and a delete edit looks like:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJEditDelete-1992&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;path&amp;#34;&lt;/span>: {&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJPath-3073&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;startNode&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;path&amp;#34;&lt;/span>: [{&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJPathKey-3221&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;key&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;myKey&amp;#34;&lt;/span>}]}}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>then the resulting JSON is the result of deleting the node specified by &lt;code>path&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="insert-example">Insert Example&lt;/h4>
&lt;p>If the pre-existing JSON tree looks like:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>and the insertion edit looks like:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJEditInsert-2523&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;path&amp;#34;&lt;/span>: {&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJPath-3073&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;startNode&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;path&amp;#34;&lt;/span>: [{&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJPathKey-3221&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;key&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;insertedKey&amp;#34;&lt;/span>}]},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;value&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;myValue&amp;#34;&lt;/span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>then the resulting JSON is the result of inserting the node described by &lt;code>value&lt;/code> at the node specified by &lt;code>path&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;insertedKey&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;myValue&amp;#34;&lt;/span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="change-example">Change Example&lt;/h4>
&lt;p>If the pre-existing JSON tree looks like:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;myKey&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;myValue&amp;#34;&lt;/span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>and the change edit looks like:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJEditChange-2636&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;path&amp;#34;&lt;/span>: {&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJPath-3073&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;startNode&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;path&amp;#34;&lt;/span>: [{&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJPathKey-3221&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;key&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;myKey&amp;#34;&lt;/span>}]},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;value&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;myOtherValue&amp;#34;&lt;/span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>then the resulting JSON is the result of changing the node specified by &lt;code>path&lt;/code> to the node described by &lt;code>value&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;myKey&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;myOtherValue&amp;#34;&lt;/span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="move-example">Move Example&lt;/h4>
&lt;p>If the pre-existing JSON tree looks like:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;myKey&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;myValue&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;myOtherKey&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;myOtherValue&amp;#34;&lt;/span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>and the move edit looks like:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJEditMove-3245&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;sourcePath&amp;#34;&lt;/span>: {&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJPath-3073&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;startNode&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;path&amp;#34;&lt;/span>: [{&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJPathKey-3221&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;key&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;myKey&amp;#34;&lt;/span>}]},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;destinationPath&amp;#34;&lt;/span>: {&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJPath-3073&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;startNode&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;path&amp;#34;&lt;/span>: [{&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJPathKey-3221&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;key&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;keyCreatedFromMove&amp;#34;&lt;/span>}]}}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>then the resulting JSON is the result of moving the node from the specified &lt;code>sourcePath&lt;/code> to the &lt;code>destinationPath&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;keyCreatedFromMove&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;myValue&amp;#34;&lt;/span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="list-example">List Example&lt;/h4>
&lt;p>If the pre-existing JSON tree looks like:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>and the list edit looks like:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJEditList-2707&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;edits&amp;#34;&lt;/span>: [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJEditInsert-2523&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;path&amp;#34;&lt;/span>: {&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJPath-3073&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;startNode&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;path&amp;#34;&lt;/span>: [{&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJPathKey-3221&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;key&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;myKey&amp;#34;&lt;/span>}]},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;value&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;myValue&amp;#34;&lt;/span>},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJEditChange-2636&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;path&amp;#34;&lt;/span>: {&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJPath-3073&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;startNode&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;path&amp;#34;&lt;/span>: [{&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJPathKey-3221&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;key&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;myKey&amp;#34;&lt;/span>}]},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;value&amp;#34;&lt;/span>: [&lt;span style="color:#a50">&amp;#34;firstValue&amp;#34;&lt;/span>, &lt;span style="color:#a50">&amp;#34;secondValue&amp;#34;&lt;/span>]},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJEditInsert-2523&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;path&amp;#34;&lt;/span>: {&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJPath-3073&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;startNode&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;path&amp;#34;&lt;/span>: [{&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJPathKey-3221&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;key&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;myKey&amp;#34;&lt;/span>},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJPathIndex-1871&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;index&amp;#34;&lt;/span>: &lt;span style="color:#099">1&lt;/span>}]},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;value&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;myBetterSecondValue&amp;#34;&lt;/span>},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJEditDelete-1992&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;path&amp;#34;&lt;/span>: {&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJPath-3073&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;startNode&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;path&amp;#34;&lt;/span>: [{&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJPathKey-3221&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;key&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;myKey&amp;#34;&lt;/span>},
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> {&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;btType&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;BTJPathIndex-1871&amp;#34;&lt;/span>, &lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;index&amp;#34;&lt;/span>: &lt;span style="color:#099">2&lt;/span>}]}}
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ]}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>then the resulting JSON is the result of applying all the given edits in order:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;myKey&amp;#34;&lt;/span>: [&lt;span style="color:#a50">&amp;#34;firstValue&amp;#34;&lt;/span>, &lt;span style="color:#a50">&amp;#34;myBetterSecondValue&amp;#34;&lt;/span>]}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>The intermediate steps were:&lt;/p>
&lt;ol>
&lt;li>Insertion:
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span> {&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;myKey&amp;#34;&lt;/span>: &lt;span style="color:#a50">&amp;#34;myValue&amp;#34;&lt;/span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>Change:
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span> {&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;myKey&amp;#34;&lt;/span>: [&lt;span style="color:#a50">&amp;#34;firstValue&amp;#34;&lt;/span>, &lt;span style="color:#a50">&amp;#34;secondValue&amp;#34;&lt;/span>]}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>List insertion:
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span> {&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;myKey&amp;#34;&lt;/span>: [&lt;span style="color:#a50">&amp;#34;firstValue&amp;#34;&lt;/span>, &lt;span style="color:#a50">&amp;#34;myBetterSecondValue&amp;#34;&lt;/span>, &lt;span style="color:#a50">&amp;#34;secondValue&amp;#34;&lt;/span>]}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;li>List deletion:
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span> {&lt;span style="color:#1e90ff;font-weight:bold">&amp;#34;myKey&amp;#34;&lt;/span>: [&lt;span style="color:#a50">&amp;#34;firstValue&amp;#34;&lt;/span>, &lt;span style="color:#a50">&amp;#34;myBetterSecondValue&amp;#34;&lt;/span>]}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/li>
&lt;/ol>
&lt;p>All the examples above were tested and validated using the Python client &lt;a href="https://github.com/onshape-public/onshape-clients/blob/next/python/test/test_app_element_json_tree.py">here&lt;/a>.&lt;/p></description></item><item><title>Docs: Webhook Notifications</title><link>https://onshape-public.github.io/docs/app-dev/webhook/</link><pubDate>Mon, 18 May 2020 20:44:05 -0400</pubDate><guid>https://onshape-public.github.io/docs/app-dev/webhook/</guid><description>
&lt;h2 id="summary">Summary&lt;/h2>
&lt;p>Webhook notifications allow an application to register to receive notifications of certain events that occur within the
Onshape environment. To receive a notification, an application must expose an endpoint that Onshape can call.&lt;/p>
&lt;h2 id="example-code">Example Code&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://github.com/onshape-public/onshape-clients/blob/master/python/test/test_webhooks.py#L126">Python&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="events">Events&lt;/h2>
&lt;p>Each type of event that an application may receive notifications for has a unique identifier known as the event type.
Event types are grouped into Event Groups. Each group shares specification requirements, as described below.&lt;/p>
&lt;h3 id="event-groups">Event Groups&lt;/h3>
&lt;p>Event types are categorized into several different groups based on the dominant user resource of the event. The group
that a given event is part of defines the required parameters needed in the registration process to identify the
resource or group of resources to watch. For instance, if registering for an event in the &lt;code>document&lt;/code> event group,
the application must identify either a specific document&amp;rsquo;s id or a specific company&amp;rsquo;s id. If registered for a company,
the event will be registered for all present and future documents owned by the company.&lt;/p>
&lt;h4 id="application-group">Application Group&lt;/h4>
&lt;p>Monitor changes to applications.&lt;/p>
&lt;h5 id="registration-requirements">Registration Requirements&lt;/h5>
&lt;ul>
&lt;li>&lt;code>clientId&lt;/code>&lt;/li>
&lt;/ul>
&lt;h5 id="supported-event-types">Supported Event Types&lt;/h5>
&lt;ul>
&lt;li>&lt;code>onshape.user.lifecycle.updateappsettings&lt;/code> - occurs when user application settings are modified&lt;/li>
&lt;/ul>
&lt;h4 id="document-group">Document Group&lt;/h4>
&lt;p>Monitor various aspects of document changes.&lt;/p>
&lt;h5 id="registration-requirements-1">Registration Requirements&lt;/h5>
&lt;ul>
&lt;li>&lt;code>documentId&lt;/code> OR &lt;code>companyId&lt;/code> must be specified in the registration body.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Note&lt;/strong>: only &lt;code>documentId&lt;/code> is valid for the &lt;code>onshape.document.lifecycle.statechange&lt;/code>.&lt;/p>
&lt;h5 id="supported-event-types-1">Supported Event Types&lt;/h5>
&lt;ul>
&lt;li>&lt;code>onshape.model.lifecycle.changed&lt;/code> - occurs when a change to a model has been made&lt;/li>
&lt;li>&lt;code>onshape.model.translation.complete&lt;/code> - occurs when a translation request is completed&lt;/li>
&lt;li>&lt;code>onshape.model.lifecycle.metadata&lt;/code> - occurs when part or element metadata is modified&lt;/li>
&lt;li>&lt;code>onshape.model.lifecycle.createversion&lt;/code> - occurs when a new version of a document is created&lt;/li>
&lt;li>&lt;code>onshape.model.lifecycle.createworkspace&lt;/code> - occurs when a new workspace is created&lt;/li>
&lt;li>&lt;code>onshape.model.lifecycle.createelement&lt;/code> - occurs when a new element is created&lt;/li>
&lt;li>&lt;code>onshape.model.lifecycle.deleteelement&lt;/code> - occurs when an element is deleted&lt;/li>
&lt;li>&lt;code>onshape.document.lifecycle.statechange&lt;/code> - occurs when an document changes state&lt;/li>
&lt;li>&lt;code>onshape.model.lifecycle.changed.externalreferences&lt;/code> - occurs when an external reference changes&lt;/li>
&lt;li>&lt;code>onshape.document.lifecycle.created&lt;/code> - occurs when a document is created&lt;/li>
&lt;li>&lt;code>onshape.revision.created&lt;/code> - occurs when a revision is created&lt;/li>
&lt;li>&lt;code>onshape.comment.create&lt;/code> - occurs when a comment is created in a document&lt;/li>
&lt;li>&lt;code>onshape.comment.update&lt;/code> - occurs when a comment is updated in a document&lt;/li>
&lt;li>&lt;code>onshape.comment.delete&lt;/code> - occurs when a deleted is deleted in a document&lt;/li>
&lt;/ul>
&lt;h4 id="workflow-group">Workflow Group&lt;/h4>
&lt;p>Monitor release management actions.&lt;/p>
&lt;h5 id="registration-requirements-2">Registration Requirements&lt;/h5>
&lt;ul>
&lt;li>&lt;code>companyId&lt;/code>&lt;/li>
&lt;/ul>
&lt;h5 id="supported-event-types-2">Supported Event Types&lt;/h5>
&lt;ul>
&lt;li>&lt;code>onshape.workflow.transition&lt;/code> - occurs when a revision or release package transitions through workflow states.&lt;/li>
&lt;/ul>
&lt;h4 id="lifecycle-group">Lifecycle Group&lt;/h4>
&lt;p>Monitor webhook changes.&lt;/p>
&lt;h5 id="registration-requirements-3">Registration Requirements&lt;/h5>
&lt;p>No requirements. This event type responds to any and all webhooks registered by the same application.&lt;/p>
&lt;h5 id="supported-event-types-3">Supported Event Types&lt;/h5>
&lt;ul>
&lt;li>&lt;code>webhook.ping&lt;/code> - occurs either in response to a request by an application to call a registered webhook, or as a post-registration validation initiated by Onshape&lt;/li>
&lt;li>&lt;code>webhook.register&lt;/code> - occurs in response to a notification registration API call&lt;/li>
&lt;li>&lt;code>webhook.unregister&lt;/code> - occurs in response to a notification deregistation API call&lt;/li>
&lt;/ul>
&lt;h2 id="webhook-registration">Webhook Registration&lt;/h2>
&lt;p>An application registers for event notification by making a REST call to the Onshape web service, providing a URL to
notify, and the required parameters for the event types to be registered, as mentioned in &lt;a href="#event-groups">Event Groups&lt;/a>.
If the registration request is well-formed, the registration API call returns information about the registration,
including a unique ID string. This ID string identifies the webhook registration. No de-duplication of notification
registrations is performed by the API. Each registration call will yield a new registration ID, even if the parameters
are identical to those passed in a prior call. Shortly after an application calls the notification registration API,
Onshape will make make an asynchronous trial notification call to the URL generated from the URL template with an event
type of webhook.register in order to test whether the application notification server is accessible. If the trial
notification delivery fails to return an HTTP 200 status code, the notification registration is cancelled. The trial
notification is usually delivered after the notification registration has been received by the application. However,
variations in network delays may result in the trial notification occurring before response is received and processed by
the application, so the notification handler should be ready to process notifications before the registration call is
made.&lt;/p>
&lt;h2 id="notifications">Notifications&lt;/h2>
&lt;p>Notifications are delivered to an application as an HTTP POST with a JSON body. The body includes information about the
identity of the registration request plus information specific to the event and notification message. An application may
register for notifications to a URL that uses either HTTP or HTTPS. If HTTPS is specified by the URL template, the
notification server must supply a certificate that is signed by a certificate authority (CA) recognized by Onshape.&lt;br>
Self-signed certificates as well as certificates signed by unrecognized CAs will be rejected, causing notification
delivery to fail.&lt;/p>
&lt;h2 id="notification-deregistration">Notification Deregistration&lt;/h2>
&lt;p>When an application no longer needs to be notified of changes specified by a particular notification registration, it should normally de-register the notification request. De-registration is performed by making an HTTP that specifies the hook to deregister. Onshape will attempt to call the deregistered hook with an event type of webhook.unregister as validation for the application that the de-registration is complete. If the application does not de-register the webhook, Onshape will continue delivering notifications until either the the application returns an error in response to a notification for the webhook, or fails to respond at all for an extended period of time.&lt;/p>
&lt;h2 id="notification-api-example-messages">Notification API example messages&lt;/h2>
&lt;p>registration&lt;/p>
&lt;pre tabindex="0">&lt;code>{
&amp;#34;timestamp&amp;#34;: &amp;#34;2014-12-16T23:45:10.611-0500&amp;#34;,
&amp;#34;event&amp;#34;: &amp;#34;webhook.register&amp;#34;,
&amp;#34;workspaceId&amp;#34;: &amp;#34;000000000000000000000000&amp;#34;,
&amp;#34;elementId&amp;#34;: &amp;#34;000000000000000000000000&amp;#34;,
&amp;#34;webhookId&amp;#34;: &amp;#34;544e91f7fb88ed44f5de1508&amp;#34;,
&amp;#34;messageId&amp;#34;: &amp;#34;34795d2e5f5f44eeb61fb7b1&amp;#34;,
&amp;#34;data&amp;#34;: &amp;#34;Some data&amp;#34;,
&amp;#34;documentId&amp;#34;: &amp;#34;000000000000000000000000&amp;#34;,
&amp;#34;versionId&amp;#34;: &amp;#34;000000000000000000000000&amp;#34;
}
&lt;/code>&lt;/pre>&lt;p>ping&lt;/p>
&lt;pre tabindex="0">&lt;code>{
&amp;#34;timestamp&amp;#34;: &amp;#34;2014-12-16T23:46:24.368-0500&amp;#34;,
&amp;#34;event&amp;#34;: &amp;#34;webhook.ping&amp;#34;,
&amp;#34;workspaceId&amp;#34;: &amp;#34;000000000000000000000000&amp;#34;,
&amp;#34;elementId&amp;#34;: &amp;#34;000000000000000000000000&amp;#34;,
&amp;#34;webhookId&amp;#34;: &amp;#34;544e91f7fb88ed44f5de1508&amp;#34;,
&amp;#34;messageId&amp;#34;: &amp;#34;6808d9a622644330b6cd95f5&amp;#34;,
&amp;#34;data&amp;#34;: &amp;#34;Some data&amp;#34;,
&amp;#34;documentId&amp;#34;: &amp;#34;000000000000000000000000&amp;#34;,
&amp;#34;versionId&amp;#34;: &amp;#34;000000000000000000000000&amp;#34;
}
&lt;/code>&lt;/pre>&lt;p>model change&lt;/p>
&lt;pre tabindex="0">&lt;code>{
&amp;#34;timestamp&amp;#34;: &amp;#34;2014-12-16T23:46:29.284-0500&amp;#34;,
&amp;#34;event&amp;#34;: &amp;#34;onshape.model.lifecycle.changed&amp;#34;,
&amp;#34;workspaceId&amp;#34;: &amp;#34;f925722bee1c43fc80fb5bb2&amp;#34;,
&amp;#34;elementId&amp;#34;: &amp;#34;0f931a1ceba842299192823f&amp;#34;,
&amp;#34;webhookId&amp;#34;: &amp;#34;544e91f7fb88ed44f5de1508&amp;#34;,
&amp;#34;messageId&amp;#34;: &amp;#34;60f54ac1cbc04179a6642d9a&amp;#34;,
&amp;#34;data&amp;#34;: &amp;#34;Some data&amp;#34;,
&amp;#34;documentId&amp;#34;: &amp;#34;0f9c4392e5934f30b48ab645&amp;#34;,
&amp;#34;versionId&amp;#34;: &amp;#34;000000000000000000000000&amp;#34;
}
&lt;/code>&lt;/pre>&lt;p>document state change&lt;/p>
&lt;pre tabindex="0">&lt;code>{
&amp;#34;timestamp&amp;#34;: &amp;#34;2014-12-16T23:46:29.284-0500&amp;#34;,
&amp;#34;event&amp;#34;: &amp;#34;onshape.document.lifecycle.statechange&amp;#34;,
&amp;#34;workspaceId&amp;#34;: &amp;#34;000000000000000000000000&amp;#34;,
&amp;#34;elementId&amp;#34;: &amp;#34;000000000000000000000000&amp;#34;,
&amp;#34;webhookId&amp;#34;: &amp;#34;544e91f7fb88ed44f5de1508&amp;#34;,
&amp;#34;messageId&amp;#34;: &amp;#34;60f54ac1cbc04179a6642d9a&amp;#34;,
&amp;#34;data&amp;#34;: &amp;#34;Some data&amp;#34;,
&amp;#34;documentId&amp;#34;: &amp;#34;0f9c4392e5934f30b48ab645&amp;#34;,
&amp;#34;versionId&amp;#34;: &amp;#34;000000000000000000000000&amp;#34;,
&amp;#34;documentState&amp;#34;: &amp;#34;TRASH&amp;#34;
}
&lt;/code>&lt;/pre>&lt;p>Possible values of documentState are:&lt;/p>
&lt;ul>
&lt;li>&amp;ldquo;ACTIVE&amp;rdquo; - document is in a normal, usable state&lt;/li>
&lt;li>&amp;ldquo;TRASH&amp;rdquo; - document has been moved to the trash (User can move out of trash to ACTIVE state)&lt;/li>
&lt;li>&amp;ldquo;DELETED&amp;rdquo; - document has been deleted&lt;/li>
&lt;/ul>
&lt;p>user application settings change&lt;/p>
&lt;pre tabindex="0">&lt;code>{
&amp;#34;timestamp&amp;#34;: &amp;#34;2014-12-16T23:46:29.284-0500&amp;#34;,
&amp;#34;event&amp;#34;: &amp;#34;onshape.user.lifecycle.updateappsettings&amp;#34;,
&amp;#34;workspaceId&amp;#34;: &amp;#34;f925722bee1c43fc80fb5bb2&amp;#34;,
&amp;#34;elementId&amp;#34;: &amp;#34;0f931a1ceba842299192823f&amp;#34;,
&amp;#34;webhookId&amp;#34;: &amp;#34;544e91f7fb88ed44f5de1508&amp;#34;,
&amp;#34;messageId&amp;#34;: &amp;#34;60f54ac1cbc04179a6642d9a&amp;#34;,
&amp;#34;data&amp;#34;: &amp;#34;Some data&amp;#34;,
&amp;#34;userId&amp;#34;: &amp;#34;567953d60a1a5fbb95940333&amp;#34;,
&amp;#34;clientId&amp;#34;:&amp;#34;ABCDEFGHIJKLMNOPQRSTUVWXZY234567ABCDEFG=&amp;#34;
}
&lt;/code>&lt;/pre>&lt;p>translation completion&lt;/p>
&lt;pre tabindex="0">&lt;code>{
&amp;#34;timestamp&amp;#34;: &amp;#34;2014-12-16T23:46:29.284-0500&amp;#34;,
&amp;#34;event&amp;#34;: &amp;#34;onshape.model.translation.complete&amp;#34;,
&amp;#34;workspaceId&amp;#34;: &amp;#34;f925722bee1c43fc80fb5bb2&amp;#34;,
&amp;#34;elementId&amp;#34;: &amp;#34;0f931a1ceba842299192823f&amp;#34;,
&amp;#34;webhookId&amp;#34;: &amp;#34;544e91f7fb88ed44f5de1508&amp;#34;,
&amp;#34;messageId&amp;#34;: &amp;#34;60f54ac1cbc04179a6642d9a&amp;#34;,
&amp;#34;data&amp;#34;: &amp;#34;Some data&amp;#34;,
&amp;#34;documentId&amp;#34;: &amp;#34;0f9c4392e5934f30b48ab645&amp;#34;,
&amp;#34;userId&amp;#34;: &amp;#34;567953d60a1a5fbb95940333&amp;#34;,
&amp;#34;translationId&amp;#34;: &amp;#34;4f5de10f9c4392e5934f30b4&amp;#34;
}
&lt;/code>&lt;/pre>&lt;p>comment create&lt;/p>
&lt;pre tabindex="0">&lt;code>{
&amp;#34;timestamp&amp;#34;: &amp;#34;2014-12-16T23:46:29.284-0500&amp;#34;,
&amp;#34;event&amp;#34;: &amp;#34;onshape.comment.create&amp;#34;,
&amp;#34;workspaceId&amp;#34;: &amp;#34;f925722bee1c43fc80fb5bb2&amp;#34;,
&amp;#34;elementId&amp;#34;: &amp;#34;0f931a1ceba842299192823f&amp;#34;,
&amp;#34;webhookId&amp;#34;: &amp;#34;544e91f7fb88ed44f5de1508&amp;#34;,
&amp;#34;messageId&amp;#34;: &amp;#34;60f54ac1cbc04179a6642d9a&amp;#34;,
&amp;#34;documentId&amp;#34;: &amp;#34;0f9c4392e5934f30b48ab645&amp;#34;,
&amp;#34;commentId&amp;#34;: &amp;#34;567953d60a1a5fbb95940333&amp;#34;
}
&lt;/code>&lt;/pre></description></item></channel></rss>