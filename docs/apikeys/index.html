<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.71.0" />

<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">



<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>API Keys | Onshape Developer Documentation</title><meta property="og:title" content="API Keys" />
<meta property="og:description" content="Using API Keys with Onshape Why API Keys? API keys are useful for small applications meant for personal use, allowing developers to avoid the overhead of the OAuth workflow. Creating an app is very easy with API keys: create an API key with the Developer Portal, set up a function to build your API key header as in the samples, and make your API calls! There&rsquo;s no need to deal with OAuth redirects or things like that." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://onshape-public.github.io/docs/apikeys/" />
<meta property="article:published_time" content="2020-05-18T20:20:41-04:00" />
<meta property="article:modified_time" content="2020-05-18T20:20:41-04:00" />
<meta itemprop="name" content="API Keys">
<meta itemprop="description" content="Using API Keys with Onshape Why API Keys? API keys are useful for small applications meant for personal use, allowing developers to avoid the overhead of the OAuth workflow. Creating an app is very easy with API keys: create an API key with the Developer Portal, set up a function to build your API key header as in the samples, and make your API calls! There&rsquo;s no need to deal with OAuth redirects or things like that.">
<meta itemprop="datePublished" content="2020-05-18T20:20:41-04:00" />
<meta itemprop="dateModified" content="2020-05-18T20:20:41-04:00" />
<meta itemprop="wordCount" content="1193">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="API Keys"/>
<meta name="twitter:description" content="Using API Keys with Onshape Why API Keys? API keys are useful for small applications meant for personal use, allowing developers to avoid the overhead of the OAuth workflow. Creating an app is very easy with API keys: create an API key with the Developer Portal, set up a function to build your API key header as in the samples, and make your API calls! There&rsquo;s no need to deal with OAuth redirects or things like that."/>





<link rel="preload" href="/scss/main.min.0b2b1932ff6c78c758cec3c3efac1347ba44cbf6a6d94fcb5ab5a0ce8937c6db.css" as="style">
<link href="/scss/main.min.0b2b1932ff6c78c758cec3c3efac1347ba44cbf6a6d94fcb5ab5a0ce8937c6db.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>

<style>
  code {
    white-space : pre-wrap !important;
    overflow-wrap: break-word;
  }
</style>

  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"></span><span class="text-uppercase font-weight-bold">Onshape Developer Documentation</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link active" href="/docs/" ><span class="active">Documentation</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">
</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center">
    

    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav pt-2 pl-4" id="td-section-nav">
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Documentation</a>
  </li>
  <ul>
    <li class="collapse show" id="docs">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page  active" id="m-docsapikeys" href="/docs/apikeys/">API Keys</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsapioverview" href="/docs/apioverview/">API Overview</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsassociativity" href="/docs/associativity/">Associativity</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsbilling" href="/docs/billing/">Billing</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsclientmessaging" href="/docs/clientmessaging/">Client Messaging</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsfeatureaccess" href="/docs/featureaccess/">Feature List API</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsoauth" href="/docs/oauth/">OAuth</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsextensions" href="/docs/extensions/">Extensions</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsstructuredstorage" href="/docs/structuredstorage/">Structured Storage</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docstessellationperformance" href="/docs/tessellationperformance/">Tessellation Performance</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docstestingguidelines" href="/docs/testingguidelines/">Testing Guidelines</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docstranslation" href="/docs/translation/">Model Translation</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docswebhook" href="/docs/webhook/">Webhook Notifications</a>
      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            











<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#why-api-keys">Why API Keys?</a></li>
        <li><a href="#questions-and-concerns">Questions and Concerns</a></li>
        <li><a href="#working-with-api-keys">Working with API Keys</a></li>
        <li><a href="#api-keys-and-oauth">API keys and OAuth</a></li>
      </ul>
    </li>
  </ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		







<li class="breadcrumb-item" >
	<a href="https://onshape-public.github.io/docs/">Documentation</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://onshape-public.github.io/docs/apikeys/">API Keys</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>API Keys</h1>
    
	       
	<h1 id="using-api-keys-with-onshape">Using API Keys with Onshape</h1>
<h3 id="why-api-keys">Why API Keys?</h3>
<p>API keys are useful for small applications meant for personal use, allowing developers to avoid the overhead of the OAuth workflow.  Creating an app is very easy with API keys: create an API key with the Developer Portal, set up a function to build your API key header as in the samples, and make your API calls!  There&rsquo;s no need to deal with OAuth redirects or things like that.</p>
<p>We&rsquo;ve moved over to using API keys for authenticating requests instead of using cookies for several reasons.</p>
<ol>
<li>Security: Each request is signed with unique headers so that we can be sure it&rsquo;s coming from the right place.</li>
<li>OAuth: The API key system we&rsquo;re now using for HTTP requests is the same process developers follow when building full-blown OAuth applications; there&rsquo;s no longer a disconnect between the two.</li>
</ol>
<p>Once you create an API key, it will only be valid in the stack on which it was created.  An API key created on the partner stack, for example, will not function on the production stack.</p>
<h3 id="questions-and-concerns">Questions and Concerns</h3>
<p>If you need information or have a question unanswered in this documentation, feel free to chat with us by sending an email to <a href="mailto:api-support@onshape.com">api-support@onshape.com</a> or by checking out the <a href="https://forum.onshape.com" target="_blank">forums</a>.  If you are a member of the DevPartners group (see the Development help page for information) more detailed instructions and code examples are in the apikey sample repo.</p>
<h3 id="working-with-api-keys">Working with API Keys</h3>
<p>Read the following and you&rsquo;ll be up and running with using API keys in your application:</p>
<h5 id="instructions">Instructions</h5>
<ol>
<li>
<p>Get the Developer role for your Onshape account by contacting us at <a href="mailto:api-support@onshape.com">api-support@onshape.com</a>.  You should already have this since you&rsquo;re in the Developer Portal already.</p>
</li>
<li>
<p>Create and manage your API key pairs from the Developer Portal; note that the secret will only be displayed once! Keep it somewhere safe.</p>
</li>
<li>
<p>Now that you have a key pair, see <a href="#generating-a-request-signature">below</a> for information on signing your requests to use our API.</p>
</li>
</ol>
<p>Once you have your access key and secret, you will want to avoid giving others access to them since they&rsquo;re tied directly to your personal Onshape account.  Think of your API key as a username and password pair.  Therefore, you should avoid placing them directly in the code for your application, especially if others might see it.  The samples use a separate configuration file that you yourself will need to create that will contain this information, but there are other ways to keep the access key and secret safe, like setting them as environment variables.</p>
<h5 id="scopes">Scopes</h5>
<p>There are several scopes available for API keys (equivalent to OAuth scopes):</p>
<ul>
<li>&ldquo;OAuth2Read&rdquo; - Read non-personal information (documents, parts, etc.)</li>
<li>&ldquo;OAuth2ReadPII&rdquo; - Read personal information (name, email, etc.)</li>
<li>&ldquo;OAuth2Write&rdquo; - Create and edit documents / etc.</li>
<li>&ldquo;OAuth2Delete&rdquo; - Delete documents / etc.</li>
<li>&ldquo;OAuth2Purchase&rdquo; - Authorize purchases from account</li>
</ul>
<h5 id="generating-a-request-signature">Generating A Request Signature</h5>
<p>To ensure that a request is coming from you, we have a process for signing requests that you must follow for API calls to work. Everything is done via HTTP headers that you&rsquo;ll need to set:</p>
<ol>
<li><em>Date</em>: A standard date header giving the time of the request; must be accurate within <strong>5 minutes</strong> of request. Example: <code>Mon, 11 Apr 2016 20:08:56 GMT</code></li>
<li><em>On-Nonce</em>: A string that satisfies the following requirements (see the code for one possible way to generate it):
<ul>
<li>At least 16 characters</li>
<li>Alphanumeric</li>
<li>Unique for each request</li>
</ul>
</li>
<li><em>Authorization</em>: This is where the API keys come into play. You&rsquo;ll sign the request by implementing this algorithm:
<ul>
<li><strong>Input</strong>: Method, URL, On-Nonce, Date, Content-Type, AccessKey, SecretKey</li>
<li><strong>Output</strong>: String of the form: <code>On &lt;AccessKey&gt;:HmacSHA256:&lt;Signature&gt;</code></li>
<li><strong>Steps to generate the signature portion</strong>:
<ol>
<li>Parse the URL and get the following:
<ol>
<li>The path, e.g. <code>/api/documents</code> (no query params!)</li>
<li>The query string, e.g. <code>a=1&amp;b=2</code>
<ul>
<li>NOTE: If no query paramaters are present, use an empty string</li>
</ul>
</li>
</ol>
</li>
<li>Create a string by appending the following information in order. Each field should be separated by a newline (<code>\n</code>) character, and the string must be converted to lowercase:
<ol>
<li>HTTP method</li>
<li>On-Nonce header value</li>
<li>Date header value</li>
<li>Content-Type header value</li>
<li>URL pathname</li>
<li>URL query string</li>
</ol>
</li>
<li>Using SHA-256, generate an <a href="https://en.wikipedia.org/wiki/Hash-based_message_authentication_code" target="_blank">HMAC digest</a>, using the API secret key first and then the above string, then encode it in Base64.</li>
<li>Create the <code>On &lt;AccessKey&gt;:HmacSHA256:&lt;Signature&gt;</code> string and use that in the Authorization header in your request.</li>
</ol>
</li>
</ul>
</li>
</ol>
<p>Below is an example function to generate the authorization header, using Node.js&rsquo;s standard <code>crypto</code> and <code>url</code> libraries:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#aaa;font-style:italic">// ...at top of file
</span><span style="color:#aaa;font-style:italic"></span><span style="color:#00a">var</span> u = require(<span style="color:#a50">&#39;url&#39;</span>);
<span style="color:#00a">var</span> crypto = require(<span style="color:#a50">&#39;crypto&#39;</span>);

<span style="color:#aaa;font-style:italic">/**
</span><span style="color:#aaa;font-style:italic">* Generates the &#34;Authorization&#34; HTTP header for using the Onshape API
</span><span style="color:#aaa;font-style:italic">*
</span><span style="color:#aaa;font-style:italic">* @param {string} method - Request method; GET, POST, etc.
</span><span style="color:#aaa;font-style:italic">* @param {string} url - The full request URL
</span><span style="color:#aaa;font-style:italic">* @param {string} nonce - 25-character nonce (generated by you)
</span><span style="color:#aaa;font-style:italic">* @param {string} authDate - UTC-formatted date string (generated by you)
</span><span style="color:#aaa;font-style:italic">* @param {string} contentType - Value of the &#34;Content-Type&#34; header; generally &#34;application/json&#34;
</span><span style="color:#aaa;font-style:italic">* @param {string} accessKey - API access key
</span><span style="color:#aaa;font-style:italic">* @param {string} secretKey - API secret key
</span><span style="color:#aaa;font-style:italic">*
</span><span style="color:#aaa;font-style:italic">* @return {string} Value for the &#34;Authorization&#34; header
</span><span style="color:#aaa;font-style:italic">*/</span>
<span style="color:#00a">function</span> createSignature(method, url, nonce, authDate, contentType, accessKey, secretKey) {
    <span style="color:#00a">var</span> urlObj = u.parse(url);
    <span style="color:#00a">var</span> urlPath = urlObj.pathname;
    <span style="color:#00a">var</span> urlQuery = urlObj.query ? urlObj.query : <span style="color:#a50">&#39;&#39;</span>; <span style="color:#aaa;font-style:italic">// if no query, use empty string
</span><span style="color:#aaa;font-style:italic"></span>
    <span style="color:#00a">var</span> str = (method + <span style="color:#a50">&#39;\n&#39;</span> + nonce + <span style="color:#a50">&#39;\n&#39;</span> + authDate + <span style="color:#a50">&#39;\n&#39;</span> + contentType + <span style="color:#a50">&#39;\n&#39;</span> +
        urlPath + <span style="color:#a50">&#39;\n&#39;</span> + urlQuery + <span style="color:#a50">&#39;\n&#39;</span>).toLowerCase();

    <span style="color:#00a">var</span> hmac = crypto.createHmac(<span style="color:#a50">&#39;sha256&#39;</span>, secretKey)
        .update(str)
        .digest(<span style="color:#a50">&#39;base64&#39;</span>);

    <span style="color:#00a">var</span> signature = <span style="color:#a50">&#39;On &#39;</span> + accessKey + <span style="color:#a50">&#39;:HmacSHA256:&#39;</span> + hmac;
    <span style="color:#00a">return</span> signature;
}
</code></pre></div><p>Some API endpoints return 307 redirects.  You must generate an Authorization header for the redirect as well, but please note that the server portion of the URL might be different, the redirect URL may contain query parameters that must be encoded in the Authorization header, etc.  Please see the samples for examples.</p>
<h3 id="api-keys-and-oauth">API keys and OAuth</h3>
<p>Our API key workflow differs from our OAuth workflow in one important characteristic: an API key allows a <em>user</em> (specifically, a developer) to make requests, while OAuth allows an <em>application</em> to make requests on behalf of the user.  We require the OAuth workflow for apps in the Onshape App Store, so if you develop an app using API keys and want to distribute it through the App Store, you will need to change to OAuth.  Please see our OAuth sample apps for examples of how to make OAuth work (onshape/app-bom is a great place to start).  The good news is that we&rsquo;ve structured API keys to work very similarly to OAuth in the operation of your app.  While you will need to build your Authorization header differently (and set up redirects and signins as in the onshape/app-bom sample), the API calls themselves will work the same in both versions, provided that the API key and the OAuth app have the same scopes.  An API key with the OAuth2Read and OAuth2Write scopes will have the same access to the same API endpoints as an OAuth application with the OAuth2Read and OAuth2Write scopes, for example.  (The only differences are when calling API endpoints relating to the OAuth application itself, since an API key request obviously does not come from an OAuth application.)</p>

	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified May 18, 2020
</div>
</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        
        
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>







<script src="/js/main.min.7ec0cf02e5628a3a2d54549b636ca3cf715405337c49f7d808a336aa4f8ba62b.js" integrity="sha256-fsDPAuViijotVFSbY2yjz3FUBTN8SffYCKM2qk&#43;Lpis=" crossorigin="anonymous"></script>



  </body>
</html>