<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.71.1" />

<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">



<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Structured Storage | Onshape Developer Documentation</title><meta property="og:title" content="Structured Storage" />
<meta property="og:description" content="Application Element API Application elements provide element storage that is controlled by applications. These elements allow a set of named sub-elements.
The application can make changes to sub-elements independently or in arbitrary groupings. Changes may be wholesale replacements, or may be deltas. When performing a delta update, the application may post a full version as well, which allows the api to return a smaller number of deltas for subsequent queries." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/docs/structuredstorage/" />
<meta property="article:published_time" content="2020-05-18T20:40:16-04:00" />
<meta property="article:modified_time" content="2020-05-18T20:40:16-04:00" />
<meta itemprop="name" content="Structured Storage">
<meta itemprop="description" content="Application Element API Application elements provide element storage that is controlled by applications. These elements allow a set of named sub-elements.
The application can make changes to sub-elements independently or in arbitrary groupings. Changes may be wholesale replacements, or may be deltas. When performing a delta update, the application may post a full version as well, which allows the api to return a smaller number of deltas for subsequent queries.">
<meta itemprop="datePublished" content="2020-05-18T20:40:16-04:00" />
<meta itemprop="dateModified" content="2020-05-18T20:40:16-04:00" />
<meta itemprop="wordCount" content="2647">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Structured Storage"/>
<meta name="twitter:description" content="Application Element API Application elements provide element storage that is controlled by applications. These elements allow a set of named sub-elements.
The application can make changes to sub-elements independently or in arbitrary groupings. Changes may be wholesale replacements, or may be deltas. When performing a delta update, the application may post a full version as well, which allows the api to return a smaller number of deltas for subsequent queries."/>





<link rel="preload" href="/scss/main.min.0b2b1932ff6c78c758cec3c3efac1347ba44cbf6a6d94fcb5ab5a0ce8937c6db.css" as="style">
<link href="/scss/main.min.0b2b1932ff6c78c758cec3c3efac1347ba44cbf6a6d94fcb5ab5a0ce8937c6db.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>


  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"></span><span class="text-uppercase font-weight-bold">Onshape Developer Documentation</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link active" href="/docs/" ><span class="active">Documentation</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">
</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center">
    

    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav pt-2 pl-4" id="td-section-nav">
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Documentation</a>
  </li>
  <ul>
    <li class="collapse show" id="docs">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsapikeys" href="/docs/apikeys/">API Keys</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsapioverview" href="/docs/apioverview/">API Overview</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsassociativity" href="/docs/associativity/">Associativity</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsbilling" href="/docs/billing/">Billing</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsclientmessaging" href="/docs/clientmessaging/">Client Messaging</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsfeatureaccess" href="/docs/featureaccess/">Feature List API</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsoauth" href="/docs/oauth/">OAuth</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page  active" id="m-docsstructuredstorage" href="/docs/structuredstorage/">Structured Storage</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docstessellationperformance" href="/docs/tessellationperformance/">Tessellation Performance</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docstestingguidelines" href="/docs/testingguidelines/">Testing Guidelines</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docstranslation" href="/docs/translation/">Model Translation</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docswebhook" href="/docs/webhook/">Webhook Notifications</a>
      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            











<nav id="TableOfContents">
  <ul>
    <li><a href="#summary-list-of-apis-described">Summary list of APIs described</a></li>
    <li><a href="#api-description">API description</a>
      <ul>
        <li><a href="#operation--create">Operation:  create</a></li>
        <li><a href="#operation--getids">Operation:  getIds</a></li>
        <li><a href="#operation-starttransaction">Operation: startTransaction</a></li>
        <li><a href="#operation-committransaction">Operation: commitTransaction</a></li>
        <li><a href="#operation-update">Operation: update</a></li>
        <li><a href="#operation-getcontent">Operation: getContent</a></li>
        <li><a href="#operation-gethistory">Operation: getHistory</a></li>
        <li><a href="#operation-deletecontent">Operation: deleteContent</a></li>
      </ul>
    </li>
    <li><a href="#error-codes">Error Codes</a></li>
    <li><a href="#onshape-creation-conventions">Onshape creation conventions</a></li>
  </ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		







<li class="breadcrumb-item" >
	<a href="http://example.org/docs/">Documentation</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="http://example.org/docs/structuredstorage/">Structured Storage</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>Structured Storage</h1>
    
	       
	<h1 id="application-element-api">Application Element API</h1>
<p>Application elements provide element storage that is controlled by applications.  These elements allow a set of named sub-elements.</p>
<p>The application can make changes to sub-elements independently or in arbitrary groupings.  Changes may be wholesale replacements, or may be deltas.  When performing a delta update, the application may post a full version as well, which allows the api to return a smaller number of deltas for subsequent queries.</p>
<p>An application may need to perform multiple versionable actions in the course of performing a user-level action, and we want to allow the individual actions to be collected into a single action from the perspective of document history.  We do this by providing support for creation of a private transaction and support for atomically committing the transaction to the document workspace as a single user-visible action.</p>
<p>Onshape does not assume any knowledge about the semantics of application deltas.  All merging of deltas into a consolidated form is done by the application.  Applications should typically send checkpoint state for a sub-element if many delta changes have been made since the last checkpoint.</p>
<p>Document content and changes are logically an array of bytes, but since they are transmitted through JSON, then are expected to be presented a Base-64 encoding of the array into string form.</p>
<p>We use some terminology in this document that is new.</p>
<ul>
<li>
<p><strong>changeId</strong> - an opaque identifier for the state of an application element.  Each change to the application element results in a new changeId</p>
</li>
<li>
<p><strong>transaction</strong> - a private workspace within a document workspace for composing modifications to an application element.  These changes are not visible to the user until committed.</p>
</li>
<li>
<p><strong>transaction commit</strong> - an operation that moves the changes performed within a transaction to the application element workspace as a single user-visible action.</p>
</li>
</ul>
<p><strong>Concurrent access by multiple users</strong></p>
<p>If the element is being concurrently accessed by multiple sessions, updates may encounter conflicts during update. If the application has a mechanism that ensures that all accesses to the element are mediated by a single process, as is done with our part studio and assemblies,  this can be addressed directly by the application.  However, if the application is not able to mediate access in this way, updates by one session may invalidate state held by another session.  We address this by notifying updaters when an update cannot be directly applied because their state is out of date and allowing them to refresh their state before re-applying the change.  We expect to also provide a webhook api for notifying applications when a concurrent update has invalidated their state.</p>
<p>This policy of requiring the application have current state when posting updates could be overly conservative in some cases.  Detecting conflict at the sub-element level might provide for better concurrent access performance, but there probably are cases where this fails, so it probably would need some level of application control.</p>
<h2 id="summary-list-of-apis-described">Summary list of APIs described</h2>
<p>Creates a new application element:</p>
<p><code>POST /api/appelements/d/:did/w/:wid</code></p>
<p>Query for the set of document sub-element ids:</p>
<p><code>GET /api/appelements/d/:did/[wvm]/:wvmid/content/ids</code></p>
<p>Create a private transaction for changes to the element:</p>
<p><code>POST /api/appelements/d/:did/w/:wid/e/:eid/transactions</code></p>
<p>Commit private transaction changes for the element to the workspace:</p>
<p><code>POST /api/appelements/d/:did/w/:wid/e/:eid/transactions/:tid</code></p>
<p>Add or update element content:</p>
<p><code>POST /api/appelements/d/:did/w/:wid/e/:eid/content</code></p>
<p>query element content:</p>
<p><code>GET /api/appelements/d/:did/[wvm]/:wvmid/e/:eid/content</code></p>
<p>delete element content</p>
<p><code>DELETE /api/appelements/d/:did/w/:wid/e/:eid/content/subelements/:sid</code></p>
<p>query element change history</p>
<p><code>GET /api/appelements/d/:did/[wvm]/:wvmid/e/:eid/content/history</code></p>
<h2 id="api-description">API description</h2>
<h3 id="operation--create">Operation:  create</h3>
<p>Creates a new application element.</p>
<blockquote>
<p>NOTE: See <a href="#onshape-creation-conventions">Onshape creation conventions</a> below for information about the initial base content of application elements created by Onshape clients.</p>
</blockquote>
<p><code>POST /api/appelements/d/:did/w/:wid</code></p>
<p>url params:</p>
<ul>
<li>:did - the id of the document in which the new element will be created</li>
<li>:wid - the workspace in which the new element will be created</li>
</ul>
<p>query params:</p>
<ul>
<li>none</li>
</ul>
<p>JSON body:</p>
<pre><code>{
   &quot;formatId&quot; : &quot;some-format-id&quot;,
   &quot;subelements&quot; : [ { &quot;subelementId&quot; : &quot;some-id-string&quot;,
                &quot;baseContent&quot; : &quot;some-base64-string&quot; },
              ...
          ],
   &quot;name&quot; : &quot;some-name&quot;
   &quot;description&quot; : &quot;some-description&quot;
}
</code></pre><p>JSON params:</p>
<ul>
<li>formatId - a value which identifies the format of the element data. It is used to allow Onshape to know what application should process the element when it is opened.  The value supplied here normally is assigned to a partner by Onshape, but may be self-assigned for limited-use development testing.  A partner may have more than one assigned formatId if their applications supports more than one type of application element.</li>
<li>Any formatId assigned by Onshape will consist of alphanumeric characters only.  Partners are welcome to create test elements as long as they contain at least one non-alphanumeric character.  Onshape suggests creating test Ids of the form &ldquo;company-app&rdquo; using the dash character.  Onshape reserves onshape-* for internal use.</li>
<li>subelements - provides initial content for zero or more sub-elements.
<ul>
<li>subelementId - an id string assigned by the application to identify a sub-element</li>
<li>baseContent - the initial value for the sub-element, expressed as a base64-encoded string</li>
</ul>
</li>
<li>name - the name to be assigned to the element</li>
<li>description - a description to be associated with the initial element change state</li>
</ul>
<p>returns:</p>
<pre><code>{
   &quot;errorCode&quot; : some-integer,
   &quot;errorDescription&quot; : &quot;some-string&quot;,
   &quot;elementId&quot; : &quot;some-element-id&quot;,
   &quot;changeId&quot; : &quot;some-change-id&quot;
}
</code></pre><ul>
<li>errorCode - has the value 0 if successful or an HTTP error status code is reported otherwise</li>
<li>errorDescription - a short description string  describing the errorCode</li>
<li>elementId - the id of the created element</li>
<li>changeId - the initial changeId of the created element</li>
</ul>
<h3 id="operation--getids">Operation:  getIds</h3>
<p>Query for the set of document sub-element ids</p>
<p><code>GET /api/appelements/d/:did/[wvm]/:wvmid/content/ids</code></p>
<p>url params:</p>
<ul>
<li>:did - the document containing the element</li>
<li>:wvmid - the workspace/version/microversion for query evaluation, corresponding to the choice of w, v, m</li>
<li>:eid - the application element</li>
</ul>
<p>query params:</p>
<ul>
<li>transactionId - an optional transaction of the element in which sub-element ids are retrieved.  If not specified, the workspace is used.</li>
<li>changeId - the changeId of the element change state from which sub-element ids are retrieved.  If not specified, the current change state of the workspace or selected transaction is used</li>
</ul>
<p>returns:</p>
<pre><code>{
   &quot;errorCode&quot; : some-integer,
   &quot;errorDescription&quot; : &quot;some-string&quot;,
   &quot;subelementIds&quot; : [ &quot;id1&quot;, &quot;id2&quot;, ... &quot;idn&quot; ],
   &quot;changeId&quot; : &quot;some-change-id&quot;
}
</code></pre><ul>
<li>errorCode - has the value 0 if the operation was successful or an HTTP error status code is reported otherwise</li>
<li>errorDescription - a short description string  describing the errorCode</li>
<li>subelementIds - an array of sub-element ids that have been defined</li>
<li>changeId - the change id of the element where the ids were evaluated.  We return changeId here primarily for the case where a workspace is used.  When a changeId is specified on input, the output will match the input.</li>
</ul>
<h3 id="operation-starttransaction">Operation: startTransaction</h3>
<p>Create a transaction for changes to the element</p>
<p>A transaction allows multiple edits to be applied and later collapsed onto the workspace as a single edit.</p>
<p><code>POST /api/appelements/d/:did/w/:wid/e/:eid/transactions</code></p>
<p>url params:</p>
<ul>
<li>:did - the document containing the element</li>
<li>:wid - the workspace in which the creation takes place</li>
<li>:eid - the application element</li>
</ul>
<p>query params:</p>
<ul>
<li>none</li>
</ul>
<p>JSON body:</p>
<pre><code>{
   &quot;parentChangeId&quot; : &quot;optional-change-id&quot;
}
</code></pre><p>JSON params:</p>
<ul>
<li>parentChangeId - identifies the change state of the element upon which this changes is based.  If at the time the call is made, this is not the current changeId for the workspace, the caller is informed that they are not using the most recent version of the element.</li>
</ul>
<p>returns:</p>
<pre><code>{
   &quot;errorCode&quot; : some-integer,
   &quot;errorDescription&quot; : &quot;some-string&quot;,
   &quot;changeId&quot; : &quot;some-change-id&quot;,
   &quot;transactionId&quot; : &quot;some-transaction-id&quot;
}
</code></pre><ul>
<li>errorCode - has the value 0 if successful or an HTTP error status code is reported otherwise</li>
<li>errorDescription - a short description string  describing the errorCode</li>
<li>changeId - the changeId off of which the branch was created.</li>
<li>transactionId - the created transaction id</li>
</ul>
<h3 id="operation-committransaction">Operation: commitTransaction</h3>
<p>Move private transaction changes for the element to the element workspace</p>
<p><code>POST /api/appelements/d/:did/w/:wid/e/:eid/transactions/:tid</code></p>
<p>url params:</p>
<ul>
<li>:did - the document containing the element</li>
<li>:eid - the application element</li>
<li>:wid - the workspace in which the creation takes place</li>
<li>:tid - the transaction being committed</li>
</ul>
<p>query params:</p>
<ul>
<li>none</li>
</ul>
<p>JSON body:</p>
<pre><code>{
    &quot;transactionId&quot; : &quot;some-transaction-id&quot;,
    &quot;description&quot; : &quot;some-description&quot;
}
</code></pre><p>JSON params:</p>
<ul>
<li>transactionId - the transaction to merge</li>
<li>description - a description string to be associated with the merged changes</li>
</ul>
<p>returns:</p>
<pre><code>{
   &quot;errorCode&quot; : some-integer,
   &quot;errorDescription&quot; : &quot;some-string&quot;,
   &quot;changeId&quot; : &quot;some-change-id&quot;
}
</code></pre><ul>
<li>errorCode - has the value 0 if successful or an HTTP error status code is reported otherwise</li>
<li>errorDescription - a short description string  describing the errorCode</li>
<li>changeId - the changeId resulting from the merge, if success is true, or the current changeId of the workspace otherwise</li>
<li>parentChangeId - the changeId that is the parent of the merged changes</li>
</ul>
<h3 id="operation-update">Operation: update</h3>
<p>Add or update element content</p>
<p><code>POST /api/appelements/d/:did/w/:wid/e/:eid/content</code></p>
<p>url params:</p>
<ul>
<li>:did - the document containing the element</li>
<li>:wid - the workspace in which the creation takes place</li>
<li>:eid - the application element</li>
</ul>
<p>query params:</p>
<ul>
<li>none</li>
</ul>
<p>JSON body:</p>
<pre><code>{
   &quot;changes&quot; : [ { &quot;subelementId&quot; : &quot;some-id&quot;,
                   &quot;baseContent&quot; : &quot;some-base64-string&quot; },
                 { &quot;subelementId&quot; : &quot;some-id&quot;,
                   &quot;delta&quot; : &quot;some-base64-string&quot; },
          ],
   &quot;transactionId&quot; : &quot;optional-transaction-id&quot;,
   &quot;parentChangeId&quot; : &quot;optional-change-id&quot;,
   &quot;description&quot; : &quot;some-description&quot;
}
</code></pre><p>JSON params:</p>
<ul>
<li>changes - contains a list of changes/updates for a set of ids.  For each id, the entry specifies the content and/or changes to the content for the change, with base content and deltas expressed as a base64-encoded string.  If an entry has only baseContent, the entry represents the creation or wholesale replacement of content for the sub-element.  If an entry has only delta, it is a pure delta, and the sub-element must already exist.  If an entry has delta + baseContent, the baseContent is interpreted as a checkpoint for the sub-element content representing the state after application of the delta, as an optimization.</li>
<li>transactionId - if specified, this is the transaction to be used used for the change rather than the current workspace for the element.</li>
<li>parentChangeId - identifies the changeId of the element upon which this changes is based.  If at the time the call is made, this is not the current changeId for the selected transaction or workspace, the caller is informed that they are not using the most recent version of the element.</li>
</ul>
<p>The operation moves the changes from the transaction to the document workspace.</p>
<p>returns</p>
<pre><code>{
   &quot;errorCode&quot; : some-integer,
   &quot;errorDescription&quot; : &quot;some-string&quot;,
   &quot;changeId&quot; : &quot;some-change-id&quot;
}
</code></pre><ul>
<li>errorCode - has the value 0 if successful or an HTTP error status code is reported otherwise</li>
<li>errorDescription - a short description string  describing the errorCode</li>
<li>changeId - the new changeId, if success is true, or the current changeId if success is false</li>
</ul>
<h3 id="operation-getcontent">Operation: getContent</h3>
<p>query element content</p>
<p><code>GET /api/appelements/d/:did/[wvm]/:wvmid/e/:eid/content</code></p>
<p>url params:</p>
<ul>
<li>:did - the document containing the element</li>
<li>:wvmid - the workspace/version/microversion in which the query takes place, corresponding to the choice of w, v or m</li>
<li>:eid - the application element</li>
</ul>
<p>query params:</p>
<ul>
<li>transactionId - (optional) specifies the transaction within the workspace for retrieval.  If not specified, the element’s workspace is used</li>
<li>changeId - (optional) specifies the changeId for the element state from which the content is to be retrieved.  If not specified, the current changeId of the selected transaction or workspace is used</li>
<li>baseChangeId - (optional) if specified, indicates that the content to be returned should be limited to the changes relative to the base changeId.  This allows collaborating clients to incrementally synchronize their state with shared state.</li>
<li>subelementId - (optional) restricts output to be for a single sub-element.  default is all sub-elements</li>
</ul>
<p>returns:</p>
<pre><code>{
  &quot;errorCode&quot; : some-integer,
  &quot;errorDescription&quot; : &quot;some-string&quot;,
  &quot;data&quot; : [ { &quot;subelementId&quot; : &quot;some id&quot;,
                &quot;baseContent&quot; : &quot;some-base64-string&quot;,
		    &quot;deltas&quot; : [
                    { &quot;delta&quot; : &quot;some-base64-string&quot; },
                    { &quot;delta&quot; : &quot;some-base64-string&quot; } ] } ],
  &quot;changeId&quot; : &quot;some-change-id&quot;
}
</code></pre><ul>
<li>errorCode - has the value 0 if the operation succeeded or an HTTP error status code is reported otherwise</li>
<li>errorDescription - a short description string  describing the errorCode</li>
<li>data - an array of results, one per selected sub-element, containing
<ul>
<li>subelementId - the id of the sub-element associated with the entry</li>
<li>baseContent - the latest complete snapshot of the sub-element, which is not necessarily from the latest change state.  If a baseChangeId is specified, the baseContent field may be absent, indicating that content already in use by the caller should be used as the base for applying any deltas.  The data is returned as a base64-encoded string. If a baseChangeId is specified and there has been an update that includes a basecontent value since the base change occurred, the returned data will include the latest base content and any deltas that occur after the base content.</li>
<li>deltas - an array of sub-element delta entries, in order of oldest to newest.  If there are no deltas, an empty array is present.  Each entry contains:
<ul>
<li>delta - an incremental delta, as provided by the application, expressed as a base64-encoded string.</li>
</ul>
</li>
</ul>
</li>
<li>changeId - the changeId of the latest change supplied in the output.</li>
</ul>
<h3 id="operation-gethistory">Operation: getHistory</h3>
<p>query element change history</p>
<p><code>GET /api/appelements/d/:did/[wvm]/:wvmid/e/:eid/content/history</code></p>
<p>url params:</p>
<ul>
<li>:did - the document containing the element</li>
<li>:wid - the workspace in which the creation takes place</li>
<li>:eid - the application element</li>
</ul>
<p>query params:</p>
<ul>
<li>none</li>
</ul>
<p>returns:</p>
<pre><code>{
  &quot;errorCode&quot; : some-integer,
  &quot;errorDescription&quot; : &quot;some-string&quot;,
  &quot;changes&quot; : [ { &quot;changeId&quot; : &quot;some-change-id&quot;,
                  &quot;createdAt&quot; : &quot;2014-09-08T13:59:37.272+0000&quot;
                  &quot;description&quot; : &quot;some-string&quot; },
                …
                ]
}
</code></pre><ul>
<li>errorCode - has the value 0 if the operation or an HTTP error status code is reported otherwise</li>
<li>errorDescription - a short description string  describing the errorCode</li>
<li>changes - an array of changes, in order of application from more recent to less recent. Each one contains:
<ul>
<li>changeId - the changeId for the change</li>
<li>description - the description of the change</li>
<li>createdAt - the date/time at which the change occurred</li>
</ul>
</li>
</ul>
<h3 id="operation-deletecontent">Operation: deleteContent</h3>
<p>delete element content</p>
<p><code>DELETE /api/appelements/d/:did/w/:wid/e/:eid/content/subelements/:sid</code></p>
<p>url params:</p>
<ul>
<li>:did - the document containing the element</li>
<li>:wid - the workspace in which the creation takes place</li>
<li>:eid - the application element</li>
<li>:sid - the subelement id - be sure to URL encode this value</li>
</ul>
<p>query params:</p>
<ul>
<li>transactionId - an optional transaction in which sub-elements are deleted.  If not specified, the workspace is used.</li>
<li>subelementId - the id associated with the sub-element to be deleted</li>
</ul>
<p>returns:</p>
<pre><code>{
    &quot;errorCode&quot; : some-integer,
    &quot;errorDescription&quot; : &quot;some-string&quot;,
    &quot;changeId&quot; : &quot;some-change-id&quot;
    &quot;parentChangeId&quot; : &quot;some-change-id&quot;
}
</code></pre><ul>
<li>errorCode - has the value 0 if successful or an HTTP error status code is reported otherwise</li>
<li>errorDescription - a short description string  describing the errorCode</li>
<li>changeId - the changeId of the entry that results in the entry deletion</li>
<li>parentChangeId - the changeId of the  prior to the deleteContent operation</li>
</ul>
<h2 id="error-codes">Error Codes</h2>
<p>The errorCode field returned by the API methods returns only a single value, 0, with a description of &ldquo;OK&rdquo;. Errors are signaled using HTTPstatus codes.</p>
<h2 id="onshape-creation-conventions">Onshape creation conventions</h2>
<p>When the Onshape client creates an application element, it will create an initial sub-element with subelementId &ldquo;OnshapeCreationContext&rdquo;.  This element contains baseContent that is a base64-encoded UTF-8 stringified representation of the JSON object described below.  This object serves to notify the associated application of the context in which the element was created.  The fields in this object may change over time as needs evolve.</p>
<p>The context object is intended to provide the application sufficient information to initialize the application element. For applications that are associated with existing data, the &ldquo;data&rdquo; field is used to identify that data.</p>
<p>As of this writing, the creation context object has the following structure:</p>
<pre><code>{
&quot;time&quot; : {some Date() object},
&quot;userId&quot; : &quot;some-user-id&quot;,
&quot;documentId&quot; : &quot;creation-document-id&quot;,
&quot;workspaceId&quot; : &quot;creation-workspace-id&quot;,
&quot;elementId&quot; : &quot;creation-element-id&quot;,
&quot;data&quot; : {
    &quot;documentId&quot; : &quot;context-document-id&quot;,
    &quot;workspaceId&quot; : &quot;context-workspace-id&quot;,
    &quot;elementId&quot; : &quot;context-element-id&quot;,
    &quot;partQuery&quot; : &quot;context-part-query&quot;
	}
}
</code></pre><p>The object may contain the following fields.</p>
<table>
  <tr>
    <td>Field</td>
    <td>Status</td>
    <td>Description</td>
  </tr>
  <tr>
    <td>time</td>
    <td>required</td>
    <td>The time this element was created</td>
  </tr>
  <tr>
    <td>userId</td>
    <td>required</td>
    <td>ID of the user who created this element</td>
  </tr>
  <tr>
    <td>documentId</td>
    <td>required</td>
    <td>ID of the document in which this element was created</td>
  </tr>
  <tr>
    <td>workspaceId</td>
    <td>required</td>
    <td>ID of the workspace in which this element was created</td>
  </tr>
  <tr>
    <td>elementId</td>
    <td>required</td>
    <td>ID of the this element when created</td>
  </tr>
  <tr>
    <td>data</td>
    <td>optional</td>
    <td>Identifies the data context.   If not present, no initial data is associated with this element.</td>
  </tr>
  <tr>
    <td>data.documentId</td>
    <td>required</td>
    <td>ID of the document that provides the data context.</td>
  </tr>
  <tr>
    <td>data.workspaceId</td>
    <td>required</td>
    <td>ID of the workspace that provides the data context.</td>
  </tr>
  <tr>
    <td>data.elementId</td>
    <td>optional</td>
    <td>ID of the element that provides the data context.</td>
  </tr>
  <tr>
    <td>data.partQuery</td>
    <td>optional</td>
    <td>Identifies a part, currently only meaningful if the data.elementId is present and is a partstudio.</td>
  </tr>
</table>

	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified May 18, 2020
</div>
</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        
        
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>







<script src="/js/main.min.e2081313840f629d5c183f26a9340d3fb9365d1e35d3a1fa01ad00849ac11949.js" integrity="sha256-4ggTE4QPYp1cGD8mqTQNP7k2XR4106H6Aa0AhJrBGUk=" crossorigin="anonymous"></script>



  </body>
</html>