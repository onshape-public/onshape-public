<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.110.0"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Structured Storage | Onshape Developer Documentation</title><meta name=description content="Sub Elements
Onshape provides application elements storage that is controlled by applications through the API.  These elements allow a set of named â€¦"><meta property="og:title" content="Structured Storage"><meta property="og:description" content="Sub Elements Onshape provides application elements storage that is controlled by applications through the API. These elements allow a set of named sub-elements.
The application can make changes to sub-elements independently or in arbitrary groupings. Changes may be wholesale replacements, or may be deltas. When performing a delta update, the application may post a full version as well, which allows the api to return a smaller number of deltas for subsequent queries."><meta property="og:type" content="article"><meta property="og:url" content="https://onshape-public.github.io/docs/structuredstorage/"><meta property="article:section" content="docs"><meta property="article:published_time" content="2020-05-18T20:40:16-04:00"><meta property="article:modified_time" content="2020-05-18T20:40:16-04:00"><meta itemprop=name content="Structured Storage"><meta itemprop=description content="Sub Elements Onshape provides application elements storage that is controlled by applications through the API. These elements allow a set of named sub-elements.
The application can make changes to sub-elements independently or in arbitrary groupings. Changes may be wholesale replacements, or may be deltas. When performing a delta update, the application may post a full version as well, which allows the api to return a smaller number of deltas for subsequent queries."><meta itemprop=datePublished content="2020-05-18T20:40:16-04:00"><meta itemprop=dateModified content="2020-05-18T20:40:16-04:00"><meta itemprop=wordCount content="1224"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Structured Storage"><meta name=twitter:description content="Sub Elements Onshape provides application elements storage that is controlled by applications through the API. These elements allow a set of named sub-elements.
The application can make changes to sub-elements independently or in arbitrary groupings. Changes may be wholesale replacements, or may be deltas. When performing a delta update, the application may post a full version as well, which allows the api to return a smaller number of deltas for subsequent queries."><link rel=preload href=/scss/main.min.b62e58da7255459c03616973d5e57025c9e05acf735fe51d880fde377e61cf51.css as=style><link href=/scss/main.min.b62e58da7255459c03616973d5e57025c9e05acf735fe51d880fde377e61cf51.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script><style>code{white-space:pre-wrap!important;overflow-wrap:break-word}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-3CY8X7Q128"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-3CY8X7Q128",{anonymize_ip:!1})}</script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo></span><span class=font-weight-bold>Onshape Developer Documentation</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/><span class=active>Documentation</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ title="Welcome to the Developer Portal" class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Documentation</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsquickstart-li><a href=/docs/quickstart/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsquickstart><span>Quick Start</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docssamplecode-li><a href=/docs/samplecode/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docssamplecode><span>Sample Code</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsapioverview-li><a href=/docs/apioverview/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsapioverview><span>API Overview</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsapikeys-li><a href=/docs/apikeys/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsapikeys><span>API Keys</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsassociativity-li><a href=/docs/associativity/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsassociativity><span>Associativity</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsbilling-li><a href=/docs/billing/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsbilling><span>Billing</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsclientmessaging-li><a href=/docs/clientmessaging/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsclientmessaging><span>Client Messaging</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsfeatureaccess-li><a href=/docs/featureaccess/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsfeatureaccess><span>Feature List API</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsoauth-li><a href=/docs/oauth/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsoauth><span>OAuth</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsintegrationguide-li><a href=/docs/integrationguide/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsintegrationguide><span>Integration Methodology Guide</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsextensions-li><a href=/docs/extensions/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsextensions><span>Extensions</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsstructuredstorage-li><a href=/docs/structuredstorage/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-docsstructuredstorage><span class=td-sidebar-nav-active-item>Structured Storage</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstessellationperformance-li><a href=/docs/tessellationperformance/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docstessellationperformance><span>Tessellation Performance</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstestingguidelines-li><a href=/docs/testingguidelines/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docstestingguidelines><span>Testing Guidelines</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstranslation-li><a href=/docs/translation/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docstranslation><span>Model Translation</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docswebhook-li><a href=/docs/webhook/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docswebhook><span>Webhook Notifications</span></a></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#sub-elements>Sub Elements</a></li><li><a href=#json-tree>JSON Tree</a><ul><li><a href=#json-tree-edit-semantics>JSON Tree Edit Semantics</a></li><li><a href=#json-tree-examples>JSON Tree Examples</a></li></ul></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=https://onshape-public.github.io/docs/>Documentation</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://onshape-public.github.io/docs/structuredstorage/>Structured Storage</a></li></ol></nav><div class=td-content><h1>Structured Storage</h1><header class=article-meta></header><h2 id=sub-elements>Sub Elements</h2><p>Onshape provides application elements storage that is controlled by applications through the API. These elements allow a set of named sub-elements.</p><p>The application can make changes to sub-elements independently or in arbitrary groupings. Changes may be wholesale replacements, or may be deltas. When performing a delta update, the application may post a full version as well, which allows the api to return a smaller number of deltas for subsequent queries.</p><p>An application may need to perform multiple versionable actions in the course of performing a user-level action, and we want to allow the individual actions to be collected into a single action from the perspective of document history. We do this by providing support for creation of a private transaction and support for atomically committing the transaction to the document workspace as a single user-visible action.</p><p>Onshape does not assume any knowledge about the semantics of application deltas. All merging of deltas into a consolidated form is done by the application. Applications should typically send checkpoint state for a sub-element if many delta changes have been made since the last checkpoint.</p><p>Document content and changes are logically an array of bytes, but since they are transmitted through JSON, then are expected to be presented a Base-64 encoding of the array into string form.</p><p>We use some terminology in this document that is new.</p><ul><li><p><strong>changeId</strong> - an opaque identifier for the state of an application element. Each change to the application element results in a new changeId</p></li><li><p><strong>transaction</strong> - a private workspace within a document workspace for composing modifications to an application element. These changes are not visible to the user until committed.</p></li><li><p><strong>transaction commit</strong> - an operation that moves the changes performed within a transaction to the application element workspace as a single user-visible action.</p></li></ul><p><strong>Concurrent access by multiple users</strong></p><p>If the element is being concurrently accessed by multiple sessions, updates may encounter conflicts during update. If the application has a mechanism that ensures that all accesses to the element are mediated by a single process, as is done with our part studio and assemblies, this can be addressed directly by the application. However, if the application is not able to mediate access in this way, updates by one session may invalidate state held by another session. We address this by notifying updaters when an update cannot be directly applied because their state is out of date and allowing them to refresh their state before re-applying the change.</p><p>This policy of requiring the application have current state when posting updates could be overly conservative in some cases. Detecting conflict at the sub-element level might provide for better concurrent access performance, but there probably are cases where this fails, so it probably would need some level of application control.</p><h2 id=json-tree>JSON Tree</h2><p>In contrast with sub elements, JSON tree storage is a more managed data storage mechanism that Onshape itself can merge and diff. At the root of it, the data structure is a single JSON object per Application Element. The user submits incremental changes that are then applied by Onshape to the JSON tree. Onshape stores these &lsquo;diffs&rsquo; in a new microversion created as a result of the update request, or during a subsequent transaction commit request. When the user then performs a merge or restore operation, Onshape can sum and apply the requisite incremental changes. By storing diffs, Onshape provides to the user a storage mechanism that is more robust to race conditions, since multiple simultaneous edits can be optionally merged by Onshape. All of these qualities make JSON tree a preferred way to store application element data in an Onshape-native manner.</p><h3 id=json-tree-edit-semantics>JSON Tree Edit Semantics</h3><h5 id=btjedit-encoding>BTJEdit Encoding</h5><p>A JSON tree edit represents an incremental change to an application element&rsquo;s JSON tree. The edit is a <code>BTJEdit</code> class, which is encoded as one of the following:</p><ul><li>Deletion:</li></ul><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{ <span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span> : <span style=color:#a50>&#34;BTJEditDelete-1992&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span> : <span style=color:#a50>&#34;path&#34;</span> }
</span></span></code></pre></div><ul><li>Insertion:</li></ul><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{ <span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span> : <span style=color:#a50>&#34;BTJEditInsert-2523&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span> : <span style=color:#a50>&#34;path&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span> : <span style=color:#a50>&#34;newValue&#34;</span> }
</span></span></code></pre></div><ul><li>Change:</li></ul><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{ <span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span> : <span style=color:#a50>&#34;BTJEditChange-2636&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span> : <span style=color:#a50>&#34;path&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span> : <span style=color:#a50>&#34;newValue&#34;</span> }
</span></span></code></pre></div><ul><li>Move:</li></ul><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{ <span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span> : <span style=color:#a50>&#34;BTJEditMove-3245&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;sourcePath&#34;</span> : <span style=color:#a50>&#34;path&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;destinationPath&#34;</span> : <span style=color:#a50>&#34;path&#34;</span> }
</span></span></code></pre></div><ul><li>List (where edit1, edit2, etc. are zero or more edits.):</li></ul><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{ <span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span> : <span style=color:#a50>&#34;BTJEditList-2707&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;edits&#34;</span> : [ <span style=color:#a50>&#34;edit1&#34;</span>, <span style=color:#a50>&#34;edit2&#34;</span>, <span style=color:#a50>&#34;...&#34;</span>] }
</span></span></code></pre></div><p>Within the above encoding, <code>newValue</code> is a stand in for any valid JSON, and <code>path</code> is a stand in for an object representing a path to the node at which to perform the edit.</p><h5 id=btjpath-encoding>BTJPath Encoding</h5><p>The BTJPath object describes a path through the JSON tree to a particular node, and is encoded as follows:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{ <span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span> : <span style=color:#a50>&#34;BTJPath-3073&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;startNode&#34;</span> : <span style=color:#a50>&#34;startNode&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span> : [ <span style=color:#a50>&#34;pathElement1&#34;</span>, <span style=color:#a50>&#34;pathElement2&#34;</span>, <span style=color:#a50>&#34;...&#34;</span>] }
</span></span></code></pre></div><p>where startNode is a string that is either empty to specify the root node or a nodeId of a node in the tree. The pathElement is one of:</p><ul><li>Key:</li></ul><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{ <span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span> : <span style=color:#a50>&#34;BTJPathKey-3221&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span> : <span style=color:#a50>&#34;string&#34;</span> }
</span></span></code></pre></div><ul><li>Index:</li></ul><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{ <span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span> : <span style=color:#a50>&#34;BTJPathIndex-1871&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;index&#34;</span> : <span style=color:#a50>&#34;integer&#34;</span> }
</span></span></code></pre></div><p>In the insertion and move type edits the path elements can describe a path that doesn&rsquo;t currently exist. Onshape will generate the proper keys and values as needed to place the node value in the proper location.</p><h3 id=json-tree-examples>JSON Tree Examples</h3><p>Below are some examples that show the body required to perform the particular edit on a JSON tree.</p><h4 id=deletion-example>Deletion Example</h4><p>If the pre-existing JSON tree looks like:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{<span style=color:#1e90ff;font-weight:700>&#34;myKey&#34;</span>:  <span style=color:#a50>&#34;myValue&#34;</span>}
</span></span></code></pre></div><p>and a delete edit looks like:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJEditDelete-1992&#34;</span>,
</span></span><span style=display:flex><span>     <span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>: {<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJPath-3073&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;startNode&#34;</span>: <span style=color:#a50>&#34;&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>: [{<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJPathKey-3221&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;myKey&#34;</span>}]}}
</span></span></code></pre></div><p>then the resulting JSON is the result of deleting the node specified by <code>path</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{}
</span></span></code></pre></div><h4 id=insert-example>Insert Example</h4><p>If the pre-existing JSON tree looks like:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{}
</span></span></code></pre></div><p>and the insertion edit looks like:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJEditInsert-2523&#34;</span>,
</span></span><span style=display:flex><span>     <span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>: {<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJPath-3073&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;startNode&#34;</span>: <span style=color:#a50>&#34;&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>: [{<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJPathKey-3221&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;insertedKey&#34;</span>}]},
</span></span><span style=display:flex><span>     <span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;myValue&#34;</span>}
</span></span></code></pre></div><p>then the resulting JSON is the result of inserting the node described by <code>value</code> at the node specified by <code>path</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{<span style=color:#1e90ff;font-weight:700>&#34;insertedKey&#34;</span>: <span style=color:#a50>&#34;myValue&#34;</span>}
</span></span></code></pre></div><h4 id=change-example>Change Example</h4><p>If the pre-existing JSON tree looks like:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{<span style=color:#1e90ff;font-weight:700>&#34;myKey&#34;</span>:  <span style=color:#a50>&#34;myValue&#34;</span>}
</span></span></code></pre></div><p>and the change edit looks like:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJEditChange-2636&#34;</span>,
</span></span><span style=display:flex><span>     <span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>: {<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJPath-3073&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;startNode&#34;</span>: <span style=color:#a50>&#34;&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>: [{<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJPathKey-3221&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;myKey&#34;</span>}]},
</span></span><span style=display:flex><span>     <span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;myOtherValue&#34;</span>}
</span></span></code></pre></div><p>then the resulting JSON is the result of changing the node specified by <code>path</code> to the node described by <code>value</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{<span style=color:#1e90ff;font-weight:700>&#34;myKey&#34;</span>:  <span style=color:#a50>&#34;myOtherValue&#34;</span>}
</span></span></code></pre></div><h4 id=move-example>Move Example</h4><p>If the pre-existing JSON tree looks like:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{<span style=color:#1e90ff;font-weight:700>&#34;myKey&#34;</span>:  <span style=color:#a50>&#34;myValue&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;myOtherKey&#34;</span>:  <span style=color:#a50>&#34;myOtherValue&#34;</span>}
</span></span></code></pre></div><p>and the move edit looks like:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJEditMove-3245&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;sourcePath&#34;</span>: {<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJPath-3073&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;startNode&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>                                                  <span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>: [{<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJPathKey-3221&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;myKey&#34;</span>}]},
</span></span><span style=display:flex><span>     <span style=color:#1e90ff;font-weight:700>&#34;destinationPath&#34;</span>: {<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJPath-3073&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;startNode&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>                         <span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>: [{<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJPathKey-3221&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;keyCreatedFromMove&#34;</span>}]}}
</span></span></code></pre></div><p>then the resulting JSON is the result of moving the node from the specified <code>sourcePath</code> to the <code>destinationPath</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{<span style=color:#1e90ff;font-weight:700>&#34;keyCreatedFromMove&#34;</span>: <span style=color:#a50>&#34;myValue&#34;</span>}
</span></span></code></pre></div><h4 id=list-example>List Example</h4><p>If the pre-existing JSON tree looks like:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{}
</span></span></code></pre></div><p>and the list edit looks like:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJEditList-2707&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;edits&#34;</span>: [
</span></span><span style=display:flex><span>        {<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJEditInsert-2523&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>: {<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJPath-3073&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;startNode&#34;</span>: <span style=color:#a50>&#34;&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>: [{<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJPathKey-3221&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;myKey&#34;</span>}]},
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;myValue&#34;</span>},
</span></span><span style=display:flex><span>        {<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJEditChange-2636&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>: {<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJPath-3073&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;startNode&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>                                                  <span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>: [{<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJPathKey-3221&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;myKey&#34;</span>}]},
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: [<span style=color:#a50>&#34;firstValue&#34;</span>, <span style=color:#a50>&#34;secondValue&#34;</span>]},
</span></span><span style=display:flex><span>        {<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJEditInsert-2523&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>: {<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJPath-3073&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;startNode&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>                                                  <span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>: [{<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJPathKey-3221&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;myKey&#34;</span>},
</span></span><span style=display:flex><span>                                                           {<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJPathIndex-1871&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;index&#34;</span>: <span style=color:#099>1</span>}]},
</span></span><span style=display:flex><span>         <span style=color:#1e90ff;font-weight:700>&#34;value&#34;</span>: <span style=color:#a50>&#34;myBetterSecondValue&#34;</span>},
</span></span><span style=display:flex><span>        {<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJEditDelete-1992&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>: {<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJPath-3073&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;startNode&#34;</span>: <span style=color:#a50>&#34;&#34;</span>,
</span></span><span style=display:flex><span>                                                  <span style=color:#1e90ff;font-weight:700>&#34;path&#34;</span>: [{<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJPathKey-3221&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;key&#34;</span>: <span style=color:#a50>&#34;myKey&#34;</span>},
</span></span><span style=display:flex><span>                                                           {<span style=color:#1e90ff;font-weight:700>&#34;btType&#34;</span>: <span style=color:#a50>&#34;BTJPathIndex-1871&#34;</span>, <span style=color:#1e90ff;font-weight:700>&#34;index&#34;</span>: <span style=color:#099>2</span>}]}}
</span></span><span style=display:flex><span>    ]}
</span></span></code></pre></div><p>then the resulting JSON is the result of applying all the given edits in order:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{<span style=color:#1e90ff;font-weight:700>&#34;myKey&#34;</span>: [<span style=color:#a50>&#34;firstValue&#34;</span>, <span style=color:#a50>&#34;myBetterSecondValue&#34;</span>]}
</span></span></code></pre></div><p>The intermediate steps were:</p><ol><li>Insertion:<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>   {<span style=color:#1e90ff;font-weight:700>&#34;myKey&#34;</span>:  <span style=color:#a50>&#34;myValue&#34;</span>}
</span></span></code></pre></div></li><li>Change:<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>   {<span style=color:#1e90ff;font-weight:700>&#34;myKey&#34;</span>: [<span style=color:#a50>&#34;firstValue&#34;</span>, <span style=color:#a50>&#34;secondValue&#34;</span>]}
</span></span></code></pre></div></li><li>List insertion:<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>   {<span style=color:#1e90ff;font-weight:700>&#34;myKey&#34;</span>: [<span style=color:#a50>&#34;firstValue&#34;</span>, <span style=color:#a50>&#34;myBetterSecondValue&#34;</span>, <span style=color:#a50>&#34;secondValue&#34;</span>]}
</span></span></code></pre></div></li><li>List deletion:<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>   {<span style=color:#1e90ff;font-weight:700>&#34;myKey&#34;</span>: [<span style=color:#a50>&#34;firstValue&#34;</span>, <span style=color:#a50>&#34;myBetterSecondValue&#34;</span>]}
</span></span></code></pre></div></li></ol><p>All the examples above were tested and validated using the Python client <a href=https://github.com/onshape-public/onshape-clients/blob/next/python/test/test_app_element_json_tree.py>here</a>.</p></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/mermaid@8.13.4/dist/mermaid.min.js integrity="sha512-JERecFUBbsm75UpkVheAuDOE8NdHjQBrPACfEQYPwvPG+fjgCpHAz1Jw2ci9EXmd3DdfiWth3O3CQvcfEg8gsA==" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script>
<script src=/js/main.min.7b55bf6c6b7512854e4a08bbd237c127d647ad103c3548888d50711b16bbde24.js integrity="sha256-e1W/bGt1EoVOSgi70jfBJ9ZHrRA8NUiIjVBxGxa73iQ=" crossorigin=anonymous></script></body></html>