<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.71.0" />

<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">



<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Structured Storage | Onshape Developer Documentation</title><meta property="og:title" content="Structured Storage" />
<meta property="og:description" content="Sub Elements Onshape provides application elements storage that is controlled by applications through the API. These elements allow a set of named sub-elements.
The application can make changes to sub-elements independently or in arbitrary groupings. Changes may be wholesale replacements, or may be deltas. When performing a delta update, the application may post a full version as well, which allows the api to return a smaller number of deltas for subsequent queries." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://onshape-public.github.io/docs/structuredstorage/" />
<meta property="article:published_time" content="2020-05-18T20:40:16-04:00" />
<meta property="article:modified_time" content="2020-05-18T20:40:16-04:00" />
<meta itemprop="name" content="Structured Storage">
<meta itemprop="description" content="Sub Elements Onshape provides application elements storage that is controlled by applications through the API. These elements allow a set of named sub-elements.
The application can make changes to sub-elements independently or in arbitrary groupings. Changes may be wholesale replacements, or may be deltas. When performing a delta update, the application may post a full version as well, which allows the api to return a smaller number of deltas for subsequent queries.">
<meta itemprop="datePublished" content="2020-05-18T20:40:16-04:00" />
<meta itemprop="dateModified" content="2020-05-18T20:40:16-04:00" />
<meta itemprop="wordCount" content="1224">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Structured Storage"/>
<meta name="twitter:description" content="Sub Elements Onshape provides application elements storage that is controlled by applications through the API. These elements allow a set of named sub-elements.
The application can make changes to sub-elements independently or in arbitrary groupings. Changes may be wholesale replacements, or may be deltas. When performing a delta update, the application may post a full version as well, which allows the api to return a smaller number of deltas for subsequent queries."/>





<link rel="preload" href="/scss/main.min.0b2b1932ff6c78c758cec3c3efac1347ba44cbf6a6d94fcb5ab5a0ce8937c6db.css" as="style">
<link href="/scss/main.min.0b2b1932ff6c78c758cec3c3efac1347ba44cbf6a6d94fcb5ab5a0ce8937c6db.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>

<style>
  code {
    white-space : pre-wrap !important;
    overflow-wrap: break-word;
  }
</style>

  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"></span><span class="text-uppercase font-weight-bold">Onshape Developer Documentation</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link active" href="/docs/" ><span class="active">Documentation</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">
</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center">
    

    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav pt-2 pl-4" id="td-section-nav">
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Documentation</a>
  </li>
  <ul>
    <li class="collapse show" id="docs">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsapikeys" href="/docs/apikeys/">API Keys</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsapioverview" href="/docs/apioverview/">API Overview</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsassociativity" href="/docs/associativity/">Associativity</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsbilling" href="/docs/billing/">Billing</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsclientmessaging" href="/docs/clientmessaging/">Client Messaging</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsfeatureaccess" href="/docs/featureaccess/">Feature List API</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsoauth" href="/docs/oauth/">OAuth</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsextensions" href="/docs/extensions/">Extensions</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page  active" id="m-docsstructuredstorage" href="/docs/structuredstorage/">Structured Storage</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docstessellationperformance" href="/docs/tessellationperformance/">Tessellation Performance</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docstestingguidelines" href="/docs/testingguidelines/">Testing Guidelines</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docstranslation" href="/docs/translation/">Model Translation</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docswebhook" href="/docs/webhook/">Webhook Notifications</a>
      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            











<nav id="TableOfContents">
  <ul>
    <li><a href="#sub-elements">Sub Elements</a></li>
    <li><a href="#json-tree">JSON Tree</a>
      <ul>
        <li><a href="#json-tree-edit-semantics">JSON Tree Edit Semantics</a></li>
        <li><a href="#json-tree-examples">JSON Tree Examples</a></li>
      </ul>
    </li>
  </ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		







<li class="breadcrumb-item" >
	<a href="https://onshape-public.github.io/docs/">Documentation</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://onshape-public.github.io/docs/structuredstorage/">Structured Storage</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>Structured Storage</h1>
    
	       
	<h2 id="sub-elements">Sub Elements</h2>
<p>Onshape provides application elements storage that is controlled by applications through the API.  These elements allow a set of named sub-elements.</p>
<p>The application can make changes to sub-elements independently or in arbitrary groupings.  Changes may be wholesale replacements, or may be deltas.  When performing a delta update, the application may post a full version as well, which allows the api to return a smaller number of deltas for subsequent queries.</p>
<p>An application may need to perform multiple versionable actions in the course of performing a user-level action, and we want to allow the individual actions to be collected into a single action from the perspective of document history.  We do this by providing support for creation of a private transaction and support for atomically committing the transaction to the document workspace as a single user-visible action.</p>
<p>Onshape does not assume any knowledge about the semantics of application deltas.  All merging of deltas into a consolidated form is done by the application.  Applications should typically send checkpoint state for a sub-element if many delta changes have been made since the last checkpoint.</p>
<p>Document content and changes are logically an array of bytes, but since they are transmitted through JSON, then are expected to be presented a Base-64 encoding of the array into string form.</p>
<p>We use some terminology in this document that is new.</p>
<ul>
<li>
<p><strong>changeId</strong> - an opaque identifier for the state of an application element.  Each change to the application element results in a new changeId</p>
</li>
<li>
<p><strong>transaction</strong> - a private workspace within a document workspace for composing modifications to an application element.  These changes are not visible to the user until committed.</p>
</li>
<li>
<p><strong>transaction commit</strong> - an operation that moves the changes performed within a transaction to the application element workspace as a single user-visible action.</p>
</li>
</ul>
<p><strong>Concurrent access by multiple users</strong></p>
<p>If the element is being concurrently accessed by multiple sessions, updates may encounter conflicts during update. If the application has a mechanism that ensures that all accesses to the element are mediated by a single process, as is done with our part studio and assemblies,  this can be addressed directly by the application.  However, if the application is not able to mediate access in this way, updates by one session may invalidate state held by another session.  We address this by notifying updaters when an update cannot be directly applied because their state is out of date and allowing them to refresh their state before re-applying the change.</p>
<p>This policy of requiring the application have current state when posting updates could be overly conservative in some cases.  Detecting conflict at the sub-element level might provide for better concurrent access performance, but there probably are cases where this fails, so it probably would need some level of application control.</p>
<h2 id="json-tree">JSON Tree</h2>
<p>In contrast with sub elements, JSON tree storage is a more managed data storage mechanism that Onshape itself can merge and diff. At the root of it, the data structure is a single JSON object per Application Element. The user submits incremental changes that are then applied by Onshape to the JSON tree. Onshape stores these &lsquo;diffs&rsquo; in a new microversion created as a result of the update request, or during a subsequent transaction commit request. When the user then performs a merge or restore operation, Onshape can sum and apply the requisite incremental changes. By storing diffs, Onshape provides to the user a storage mechanism that is more robust to race conditions, since multiple simultaneous edits can be optionally merged by Onshape. All of these qualities make JSON tree a preferred way to store application element data in an Onshape-native manner.</p>
<h3 id="json-tree-edit-semantics">JSON Tree Edit Semantics</h3>
<h5 id="btjedit-encoding">BTJEdit Encoding</h5>
<p>A JSON tree edit represents an incremental change to an application element&rsquo;s JSON tree. The edit is a <code>BTJEdit</code> class, which is encoded as one of the following:</p>
<ul>
<li>Deletion:</li>
</ul>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{ <span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span> : <span style="color:#a50">&#34;BTJEditDelete-1992&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;path&#34;</span> : <span style="color:#a50">&#34;path&#34;</span> }
</code></pre></div><ul>
<li>Insertion:</li>
</ul>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{ <span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span> : <span style="color:#a50">&#34;BTJEditInsert-2523&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;path&#34;</span> : <span style="color:#a50">&#34;path&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;value&#34;</span> : <span style="color:#a50">&#34;newValue&#34;</span> }
</code></pre></div><ul>
<li>Change:</li>
</ul>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{ <span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span> : <span style="color:#a50">&#34;BTJEditChange-2636&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;path&#34;</span> : <span style="color:#a50">&#34;path&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;value&#34;</span> : <span style="color:#a50">&#34;newValue&#34;</span> }
</code></pre></div><ul>
<li>Move:</li>
</ul>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{ <span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span> : <span style="color:#a50">&#34;BTJEditMove-3245&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;sourcePath&#34;</span> : <span style="color:#a50">&#34;path&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;destinationPath&#34;</span> : <span style="color:#a50">&#34;path&#34;</span> }
</code></pre></div><ul>
<li>List (where edit1, edit2, etc. are zero or more edits.):</li>
</ul>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{ <span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span> : <span style="color:#a50">&#34;BTJEditList-2707&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;edits&#34;</span> : [ <span style="color:#a50">&#34;edit1&#34;</span>, <span style="color:#a50">&#34;edit2&#34;</span>, <span style="color:#a50">&#34;...&#34;</span>] }
</code></pre></div><p>Within the above encoding, <code>newValue</code> is a stand in for any valid JSON, and <code>path</code> is a stand in for an object representing a path to the node at which to perform the edit.</p>
<h5 id="btjpath-encoding">BTJPath Encoding</h5>
<p>The BTJPath object describes a path through the JSON tree to a particular node, and is encoded as follows:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{ <span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span> : <span style="color:#a50">&#34;BTJPath-3073&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;startNode&#34;</span> : <span style="color:#a50">&#34;startNode&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;path&#34;</span> : [ <span style="color:#a50">&#34;pathElement1&#34;</span>, <span style="color:#a50">&#34;pathElement2&#34;</span>, <span style="color:#a50">&#34;...&#34;</span>] }
</code></pre></div><p>where startNode is a string that is either empty to specify the root node or a nodeId of a node in the tree. The pathElement is one of:</p>
<ul>
<li>Key:</li>
</ul>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{ <span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span> : <span style="color:#a50">&#34;BTJPathKey-3221&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;key&#34;</span> : <span style="color:#a50">&#34;string&#34;</span> }
</code></pre></div><ul>
<li>Index:</li>
</ul>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{ <span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span> : <span style="color:#a50">&#34;BTJPathIndex-1871&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;index&#34;</span> : <span style="color:#a50">&#34;integer&#34;</span> }
</code></pre></div><p>In the insertion and move type edits the path elements can describe a path that doesn&rsquo;t currently exist. Onshape will generate the proper keys and values as needed to place the node value in the proper location.</p>
<h3 id="json-tree-examples">JSON Tree Examples</h3>
<p>Below are some examples that show the body required to perform the particular edit on a JSON tree.</p>
<h4 id="deletion-example">Deletion Example</h4>
<p>If the pre-existing JSON tree looks like:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{<span style="color:#1e90ff;font-weight:bold">&#34;myKey&#34;</span>:  <span style="color:#a50">&#34;myValue&#34;</span>}
</code></pre></div><p>and a delete edit looks like:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJEditDelete-1992&#34;</span>,
     <span style="color:#1e90ff;font-weight:bold">&#34;path&#34;</span>: {<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJPath-3073&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;startNode&#34;</span>: <span style="color:#a50">&#34;&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;path&#34;</span>: [{<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJPathKey-3221&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;key&#34;</span>: <span style="color:#a50">&#34;myKey&#34;</span>}]}}
</code></pre></div><p>then the resulting JSON is the result of deleting the node specified by <code>path</code>:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{}
</code></pre></div><h4 id="insert-example">Insert Example</h4>
<p>If the pre-existing JSON tree looks like:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{}
</code></pre></div><p>and the insertion edit looks like:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJEditInsert-2523&#34;</span>,
     <span style="color:#1e90ff;font-weight:bold">&#34;path&#34;</span>: {<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJPath-3073&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;startNode&#34;</span>: <span style="color:#a50">&#34;&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;path&#34;</span>: [{<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJPathKey-3221&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;key&#34;</span>: <span style="color:#a50">&#34;insertedKey&#34;</span>}]},
     <span style="color:#1e90ff;font-weight:bold">&#34;value&#34;</span>: <span style="color:#a50">&#34;myValue&#34;</span>}
</code></pre></div><p>then the resulting JSON is the result of inserting the node described by <code>value</code> at the node specified by <code>path</code>:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{<span style="color:#1e90ff;font-weight:bold">&#34;insertedKey&#34;</span>: <span style="color:#a50">&#34;myValue&#34;</span>}
</code></pre></div><h4 id="change-example">Change Example</h4>
<p>If the pre-existing JSON tree looks like:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{<span style="color:#1e90ff;font-weight:bold">&#34;myKey&#34;</span>:  <span style="color:#a50">&#34;myValue&#34;</span>}
</code></pre></div><p>and the change edit looks like:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJEditChange-2636&#34;</span>,
     <span style="color:#1e90ff;font-weight:bold">&#34;path&#34;</span>: {<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJPath-3073&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;startNode&#34;</span>: <span style="color:#a50">&#34;&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;path&#34;</span>: [{<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJPathKey-3221&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;key&#34;</span>: <span style="color:#a50">&#34;myKey&#34;</span>}]},
     <span style="color:#1e90ff;font-weight:bold">&#34;value&#34;</span>: <span style="color:#a50">&#34;myOtherValue&#34;</span>}
</code></pre></div><p>then the resulting JSON is the result of changing the node specified by <code>path</code> to the node described by <code>value</code>:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{<span style="color:#1e90ff;font-weight:bold">&#34;myKey&#34;</span>:  <span style="color:#a50">&#34;myOtherValue&#34;</span>}
</code></pre></div><h4 id="move-example">Move Example</h4>
<p>If the pre-existing JSON tree looks like:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{<span style="color:#1e90ff;font-weight:bold">&#34;myKey&#34;</span>:  <span style="color:#a50">&#34;myValue&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;myOtherKey&#34;</span>:  <span style="color:#a50">&#34;myOtherValue&#34;</span>}
</code></pre></div><p>and the move edit looks like:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJEditMove-3245&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;sourcePath&#34;</span>: {<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJPath-3073&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;startNode&#34;</span>: <span style="color:#a50">&#34;&#34;</span>,
                                                  <span style="color:#1e90ff;font-weight:bold">&#34;path&#34;</span>: [{<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJPathKey-3221&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;key&#34;</span>: <span style="color:#a50">&#34;myKey&#34;</span>}]},
     <span style="color:#1e90ff;font-weight:bold">&#34;destinationPath&#34;</span>: {<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJPath-3073&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;startNode&#34;</span>: <span style="color:#a50">&#34;&#34;</span>,
                         <span style="color:#1e90ff;font-weight:bold">&#34;path&#34;</span>: [{<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJPathKey-3221&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;key&#34;</span>: <span style="color:#a50">&#34;keyCreatedFromMove&#34;</span>}]}}
</code></pre></div><p>then the resulting JSON is the result of moving the node from the specified <code>sourcePath</code> to the <code>destinationPath</code>:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{<span style="color:#1e90ff;font-weight:bold">&#34;keyCreatedFromMove&#34;</span>: <span style="color:#a50">&#34;myValue&#34;</span>}
</code></pre></div><h4 id="list-example">List Example</h4>
<p>If the pre-existing JSON tree looks like:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{}
</code></pre></div><p>and the list edit looks like:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJEditList-2707&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;edits&#34;</span>: [
        {<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJEditInsert-2523&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;path&#34;</span>: {<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJPath-3073&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;startNode&#34;</span>: <span style="color:#a50">&#34;&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;path&#34;</span>: [{<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJPathKey-3221&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;key&#34;</span>: <span style="color:#a50">&#34;myKey&#34;</span>}]},
         <span style="color:#1e90ff;font-weight:bold">&#34;value&#34;</span>: <span style="color:#a50">&#34;myValue&#34;</span>},
        {<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJEditChange-2636&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;path&#34;</span>: {<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJPath-3073&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;startNode&#34;</span>: <span style="color:#a50">&#34;&#34;</span>,
                                                  <span style="color:#1e90ff;font-weight:bold">&#34;path&#34;</span>: [{<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJPathKey-3221&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;key&#34;</span>: <span style="color:#a50">&#34;myKey&#34;</span>}]},
         <span style="color:#1e90ff;font-weight:bold">&#34;value&#34;</span>: [<span style="color:#a50">&#34;firstValue&#34;</span>, <span style="color:#a50">&#34;secondValue&#34;</span>]},
        {<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJEditInsert-2523&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;path&#34;</span>: {<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJPath-3073&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;startNode&#34;</span>: <span style="color:#a50">&#34;&#34;</span>,
                                                  <span style="color:#1e90ff;font-weight:bold">&#34;path&#34;</span>: [{<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJPathKey-3221&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;key&#34;</span>: <span style="color:#a50">&#34;myKey&#34;</span>},
                                                           {<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJPathIndex-1871&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;index&#34;</span>: <span style="color:#099">1</span>}]},
         <span style="color:#1e90ff;font-weight:bold">&#34;value&#34;</span>: <span style="color:#a50">&#34;myBetterSecondValue&#34;</span>},
        {<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJEditDelete-1992&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;path&#34;</span>: {<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJPath-3073&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;startNode&#34;</span>: <span style="color:#a50">&#34;&#34;</span>,
                                                  <span style="color:#1e90ff;font-weight:bold">&#34;path&#34;</span>: [{<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJPathKey-3221&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;key&#34;</span>: <span style="color:#a50">&#34;myKey&#34;</span>},
                                                           {<span style="color:#1e90ff;font-weight:bold">&#34;btType&#34;</span>: <span style="color:#a50">&#34;BTJPathIndex-1871&#34;</span>, <span style="color:#1e90ff;font-weight:bold">&#34;index&#34;</span>: <span style="color:#099">2</span>}]}}
    ]}
</code></pre></div><p>then the resulting JSON is the result of applying all the given edits in order:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{<span style="color:#1e90ff;font-weight:bold">&#34;myKey&#34;</span>: [<span style="color:#a50">&#34;firstValue&#34;</span>, <span style="color:#a50">&#34;myBetterSecondValue&#34;</span>]}
</code></pre></div><p>The intermediate steps were:</p>
<ol>
<li>Insertion:
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">   {<span style="color:#1e90ff;font-weight:bold">&#34;myKey&#34;</span>:  <span style="color:#a50">&#34;myValue&#34;</span>}
</code></pre></div></li>
<li>Change:
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">   {<span style="color:#1e90ff;font-weight:bold">&#34;myKey&#34;</span>: [<span style="color:#a50">&#34;firstValue&#34;</span>, <span style="color:#a50">&#34;secondValue&#34;</span>]}
</code></pre></div></li>
<li>List insertion:
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">   {<span style="color:#1e90ff;font-weight:bold">&#34;myKey&#34;</span>: [<span style="color:#a50">&#34;firstValue&#34;</span>, <span style="color:#a50">&#34;myBetterSecondValue&#34;</span>, <span style="color:#a50">&#34;secondValue&#34;</span>]}
</code></pre></div></li>
<li>List deletion:
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">   {<span style="color:#1e90ff;font-weight:bold">&#34;myKey&#34;</span>: [<span style="color:#a50">&#34;firstValue&#34;</span>, <span style="color:#a50">&#34;myBetterSecondValue&#34;</span>]}
</code></pre></div></li>
</ol>
<p>All the examples above were tested and validated using the Python client <a href="https://github.com/onshape-public/onshape-clients/blob/next/python/test/test_app_element_json_tree.py">here</a>.</p>

	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified May 18, 2020
</div>
</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        
        
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>







<script src="/js/main.min.7ec0cf02e5628a3a2d54549b636ca3cf715405337c49f7d808a336aa4f8ba62b.js" integrity="sha256-fsDPAuViijotVFSbY2yjz3FUBTN8SffYCKM2qk&#43;Lpis=" crossorigin="anonymous"></script>



  </body>
</html>